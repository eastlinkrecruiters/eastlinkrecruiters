<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="EastLink - The elite platform connecting exceptional talent with trusted employers.">
    <title>EastLink | Elite Talent Connection</title>
    
    <meta name="theme-color" content="#020617">

    <!-- PWA Manifest & Favicon -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/svg+xml" href="./assets/images/favicon.svg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons & Animation -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /* =========================================
           THEME VARIABLES
           ========================================= */
        :root {
            --primary: #f59e0b; 
            --purple-gradient: linear-gradient(135deg, #a855f7 0%, #7e22ce 100%);
            --gold-gradient: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            
            /* Glass Variables */
            --bg-body: transparent;      
            --bg-card: rgba(15, 23, 42, 0.45);       
            --bg-header: rgba(2, 6, 23, 0.7);       
            --bg-input: rgba(255, 255, 255, 0.08);      
            
            --text: #ffffff;
            --text-muted: #e2e8f0;   
            --border-color: rgba(255, 255, 255, 0.15); 
            
            --header-height: 80px;
            --transition: all 0.3s ease;
            --glass: blur(16px); 
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; 
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* GLOBAL BACKGROUND IMAGE */
        body::before {
            content: ''; position: fixed; inset: 0;
            background-image: url('./assets/images/background.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -5;
            opacity: 1; 
        }

        body::after {
            content: ''; position: fixed; inset: 0;
            background: rgba(2, 6, 23, 0.3); 
            z-index: -4; pointer-events: none;
        }

        h1, h2, h3, h4, .brand-font { font-family: 'Cinzel', serif; font-weight: 700; }
        a { text-decoration: none; color: inherit; transition: var(--transition); }
        img { max-width: 100%; display: block; }

        .container { width: 100%; max-width: 1280px; margin: 0 auto; padding: 0 1.5rem; }
        .section { padding: 5rem 0; } 

        /* Scroll Progress */
        #scroll-progress {
            position: fixed; top: 0; left: 0; height: 3px; background: #a855f7;
            z-index: 2000; width: 0%; transition: width 0.1s;
        }

        /* Back To Top */
        #back-to-top {
            position: fixed; bottom: 30px; right: 30px;
            width: 45px; height: 45px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: #a855f7; font-size: 1.1rem;
            cursor: pointer; opacity: 0; pointer-events: none;
            transition: all 0.3s ease; z-index: 999;
        }
        #back-to-top.visible { opacity: 1; pointer-events: all; }
        #back-to-top:hover { background: #a855f7; color: #fff; transform: translateY(-5px); }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; height: var(--header-height);
            z-index: 1000; transition: var(--transition); 
            background: var(--bg-header); 
            backdrop-filter: var(--glass);
            border-bottom: 1px solid var(--border-color);
        }

        .nav-inner { height: 100%; display: flex; justify-content: space-between; align-items: center; }

        .header-logo-text {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem; font-weight: 800; color: var(--text);
            letter-spacing: 1px; display: flex; align-items: center; gap: 12px;
        }
        .header-logo-text span { color: var(--primary); }

        .menu-trigger {
            display: inline-flex; align-items: center; gap: 12px; cursor: pointer;
            padding: 8px 20px; border-radius: 99px;
            background: rgba(255,255,255,0.05); border: 1px solid var(--border-color);
            color: var(--text); font-size: 0.75rem; font-weight: 700; letter-spacing: 1px;
            transition: var(--transition);
        }
        .menu-trigger:hover { border-color: #a855f7; background: rgba(168, 85, 247, 0.1); }

        /* --- MENU OVERLAY --- */
        .menu-overlay {
            position: fixed; inset: 0; 
            background: rgba(2, 6, 23, 0.85); 
            backdrop-filter: blur(25px); 
            z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: var(--transition);
        }
        .menu-overlay.active { opacity: 1; pointer-events: all; }
        .close-menu {
            position: absolute; top: 30px; right: 30px;
            width: 44px; height: 44px; border-radius: 50%;
            border: 1px solid var(--border-color); color: var(--text-muted);
            display: grid; place-items: center; cursor: pointer; transition: 0.3s; font-size: 1.2rem;
        }
        .close-menu:hover { border-color: #a855f7; color: #a855f7; transform: rotate(90deg); }
        .menu-links { text-align: center; display: flex; flex-direction: column; gap: 25px; }
        .menu-link { font-family: 'Cinzel', serif; font-size: 2.5rem; font-weight: 700; color: var(--text); transition: 0.3s; }
        .menu-link:hover { color: #a855f7; text-shadow: 0 0 20px rgba(168, 85, 247, 0.4); }
        
        /* --- HERO SECTION --- */
        .hero { 
            position: relative;
            padding-top: calc(var(--header-height) + 50px); 
            padding-bottom: 3rem; 
            min-height: auto; 
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('./assets/images/herosection.png');
            background-size: cover; background-position: center center;
            filter: blur(8px) brightness(0.6); -webkit-filter: blur(8px) brightness(0.6);
            transform: scale(1.1); z-index: -2;
        }
        
        .hero::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(180deg, rgba(2,6,23,0.4) 0%, rgba(2,6,23,0.8) 100%);
            z-index: -1;
        }

        .hero-container {
            position: relative; z-index: 5; width: 100%; max-width: 900px; 
            text-align: center; margin: 0 auto; padding: 0 20px;
        }

        .hero-decoration {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 600px; height: 600px; background: radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 70%);
            z-index: -1; pointer-events: none; animation: pulseGlow 4s infinite alternate;
        }
        @keyframes pulseGlow { from { opacity: 0.5; transform: translate(-50%, -50%) scale(0.9); } to { opacity: 1; transform: translate(-50%, -50%) scale(1.1); } }

        .hero h1 { 
            font-size: clamp(2.8rem, 5vw, 4.5rem); font-weight: 800; margin-bottom: 24px; 
            color: #ffffff; line-height: 1.1; text-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        
        .hero p { 
            font-size: 1.15rem; color: #f1f5f9; margin-bottom: 35px; line-height: 1.6; 
            max-width: 700px; margin-left: auto; margin-right: auto;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8); font-weight: 500;
        }
        
        .hero-btn-group { display: flex; align-items: center; justify-content: center; gap: 15px; }
        
        .btn-browse, .btn-get-started {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 10px 24px; border-radius: 50px; font-size: 0.9rem;
            text-decoration: none; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); height: 44px;
        }

        .btn-browse {
            background: rgba(255, 255, 255, 0.1); color: #fff; 
            border: 1px solid rgba(255, 255, 255, 0.3); backdrop-filter: blur(10px); 
        }
        .btn-browse:hover { border-color: #a855f7; background: rgba(255,255,255,0.2); transform: translateY(-2px); }

        .btn-get-started {
            background: var(--purple-gradient); /* PURPLE ACCENT */
            color: #fff; border: none; font-weight: 700; 
            box-shadow: 0 0 15px rgba(168, 85, 247, 0.3); 
        }
        .btn-get-started:hover { transform: translateY(-2px); box-shadow: 0 0 25px rgba(168, 85, 247, 0.6); }

        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-slide-up { animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
        .animate-text-glow { background: linear-gradient(to right, #ffffff, #d8b4fe); -webkit-background-clip: text; -webkit-text-fill-color: transparent; position: relative; }

        /* --- TICKER STRIP (Endless Left Animation) --- */
        .ticker-strip {
            background: rgba(15, 23, 42, 0.8); 
            border-top: 1px solid var(--border-color); 
            border-bottom: 1px solid var(--border-color);
            padding: 12px 0; 
            backdrop-filter: blur(15px); 
            z-index: 10; 
            position: relative;
            overflow: hidden; /* Hide scrollbars */
            display: flex;
            align-items: center;
        }

        .ticker-track {
            display: flex;
            align-items: center;
            gap: 40px;
            white-space: nowrap;
            /* Infinite animation */
            animation: scrollTicker 30s linear infinite;
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .ticker-item i { color: #f59e0b; } /* Gold icon */
        .ticker-item span { font-weight: 500; color: #fff; }

        @keyframes scrollTicker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); } /* Move half width assuming duplicated content */
        }
        
        /* Pause ticker on hover */
        .ticker-strip:hover .ticker-track {
            animation-play-state: paused;
        }


        /* --- SEARCH SECTION --- */
        .search-strip { padding: 3rem 0; position: relative; z-index: 5; }
        .search-container {
            background: var(--bg-card); backdrop-filter: blur(15px); border: 1px solid var(--border-color);
            border-radius: 100px; padding: 8px; display: flex; align-items: center; justify-content: space-between;
            max-width: 800px; margin: 0 auto; box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        .search-input-wrap { flex-grow: 1; position: relative; display: flex; align-items: center; padding-left: 20px; }
        
        /* GOLDEN SEARCH ICON */
        .search-icon { color: #f59e0b; margin-right: 15px; font-size: 1.1rem; }
        
        .search-input { width: 100%; background: transparent; border: none; color: white; font-size: 1rem; outline: none; padding: 10px 0; }
        
        /* GOLDEN SEARCH BUTTON */
        .search-btn {
            background: var(--gold-gradient); /* Gold */
            color: #000; border: none; padding: 12px 35px; border-radius: 50px;
            font-weight: 700; cursor: pointer; transition: 0.3s;
        }
        .search-btn:hover { background: #d97706; box-shadow: 0 0 15px rgba(245, 158, 11, 0.4); }

        .trending-tags { text-align: center; margin-top: 15px; font-size: 0.85rem; color: var(--text-muted); }
        .tag-pill { display: inline-block; padding: 4px 12px; border: 1px solid var(--border-color); border-radius: 20px; margin: 0 5px; cursor: pointer; transition: 0.2s; background: rgba(0,0,0,0.2); }
        .tag-pill:hover { border-color: #f59e0b; color: #f59e0b; }

        /* --- FEATURED JOBS SECTION --- */
        .job-card {
            background: #111827;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px; 
            padding: 24px;
            transform-style: preserve-3d;
            perspective: 1000px;
            box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.6);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; 
            display: flex; 
            flex-direction: column; 
            min-height: 280px;
        }
        .job-card:hover { 
            transform: translateY(-12px) rotateX(4deg); 
            border-color: #a855f7; 
            box-shadow: 0 25px 50px -10px rgba(168, 85, 247, 0.2); 
        }
        
        .job-head { display: flex; gap: 15px; align-items: flex-start; margin-bottom: 12px; transform: translateZ(20px); }
        .j-logo { width: 45px; height: 45px; background: rgba(255,255,255,0.05); border-radius: 10px; display: grid; place-items: center; overflow: hidden; flex-shrink: 0; }
        .j-logo img { width: 100%; height: 100%; object-fit: cover; }
        .j-logo-text { font-weight: 700; font-size: 1.2rem; color: #a855f7; }
        
        .j-details h3 { font-size: 1rem; font-weight: 700; color: #fff; margin-bottom: 2px; }
        .j-details p { font-size: 0.8rem; color: var(--text-muted); }

        .j-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 12px; transform: translateZ(10px); }
        .j-tag { font-size: 0.7rem; padding: 3px 8px; border-radius: 4px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.05); color: var(--text-muted); }
        
        .j-salary { font-family: monospace; font-size: 0.85rem; color: #10B981; font-weight: 600; padding: 8px 0; border-top: 1px solid rgba(255,255,255,0.05); margin-bottom: 12px; }
        
        /* Updated Button Container for Horizontal Layout */
        .job-actions {
            margin-top: auto;
            display: flex;
            justify-content: space-between; 
            gap: 8px;
            width: 100%;
        }

        /* Common Button Styles for Jobs */
        .btn-job-action {
            flex: 1; /* Distribute space evenly */
            text-align: center; padding: 10px 0; border-radius: 8px;
            font-weight: 700; cursor: pointer; text-decoration: none; transition: 0.3s;
            border: none; display: flex; align-items: center; justify-content: center;
            font-size: 0.85rem; height: 42px;
        }

        .btn-view-card {
            background: var(--gold-gradient); color: #000;
            box-shadow: 0 4px 10px rgba(245, 158, 11, 0.3);
        }
        .btn-view-card:hover { transform: translateY(-2px); }

        .btn-apply-card {
            background: var(--purple-gradient); color: white;
            box-shadow: 0 4px 10px rgba(168, 85, 247, 0.3);
        }
        .btn-apply-card:hover { transform: translateY(-2px); }

        /* Realistic WhatsApp Button */
        .btn-whatsapp-card {
            flex: 0 0 42px; /* Square button for icon */
            background: #25D366; color: white;
            box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3);
            font-size: 1.2rem;
        }
        .btn-whatsapp-card:hover { transform: translateY(-2px); background: #20BA5A; }

        .job-details-expanded {
            margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.05);
            border-radius: 10px; font-size: 0.85rem; color: #e2e8f0; display: none;
            border: 1px solid rgba(255,255,255,0.1); animation: fadeIn 0.3s ease;
            margin-bottom: 15px;
        }
        .job-details-expanded.active { display: block; }

        /* --- TESTIMONIALS --- */
        .stories-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px; margin-top: 30px; display: none;
        }
        .stories-grid.visible { display: grid; animation: fadeIn 0.5s ease; }

        .testi-card {
            background: var(--bg-card); backdrop-filter: var(--glass);
            border: 1px solid var(--border-color); border-radius: 16px; padding: 25px;
            display: flex; flex-direction: column; position: relative;
        }
        .testi-card::before { content:'"'; position: absolute; top: 15px; right: 15px; font-size: 3rem; color: #f59e0b; opacity: 0.1; font-family: serif; line-height: 1; }
        .testi-user { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .testi-avatar { width: 40px; height: 40px; background: var(--purple-gradient); color: white; border-radius: 50%; font-weight: 800; display: grid; place-items: center; font-family: 'Cinzel'; font-size: 1rem; }
        .testi-msg { font-style: italic; color: #e2e8f0; font-size: 0.9rem; line-height: 1.6; }

        /* Golden Testimonials Button */
        .btn-trigger-story {
            background: transparent; border: 1px solid #f59e0b; color: #f59e0b;
            padding: 10px 24px; border-radius: 50px; cursor: pointer; font-weight: 600;
            display: inline-flex; align-items: center; gap: 8px; transition: 0.3s;
        }
        .btn-trigger-story:hover { background: var(--gold-gradient); color: #000; border-color: transparent; }

        .btn-toggle-section {
            background: transparent; border: 1px solid var(--border-color); color: var(--text-muted);
            padding: 10px 25px; border-radius: 50px; cursor: pointer; transition: 0.3s;
            margin: 20px auto; display: block;
        }
        .btn-toggle-section:hover { border-color: #a855f7; color: #a855f7; }

        /* MODALS (PROFESSIONAL PAGE FEEL) */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            backdrop-filter: blur(10px);
            z-index: 3000; display: none; align-items: center; justify-content: center; padding: 20px;
            opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-overlay.open { display: flex; opacity: 1; }
        
        .modal-content-page {
            background: #0f172a; border: 1px solid #f59e0b; border-radius: 20px;
            width: 100%; max-width: 600px; max-height: 90vh; overflow-y: auto; padding: 40px; 
            position: relative; box-shadow: 0 0 50px rgba(245, 158, 11, 0.15);
            transform: translateY(20px); transition: 0.4s ease;
        }
        .modal-overlay.open .modal-content-page { transform: translateY(0); }

        .modal-close-page {
            position: absolute; top: 20px; right: 20px; width: 40px; height: 40px;
            background: rgba(255,255,255,0.05); border-radius: 50%; display: grid; place-items: center;
            cursor: pointer; color: var(--text-muted); transition: 0.2s; font-size: 1.2rem;
        }
        .modal-close-page:hover { background: #f59e0b; color: #000; }

        /* Professional Input Styling */
        .form-label { display: block; font-size: 0.8rem; color: #94a3b8; margin-bottom: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-input { 
            width: 100%; background: #1e293b; border: 1px solid #334155; 
            padding: 14px 16px; border-radius: 8px; color: #fff; outline: none; 
            font-family: inherit; transition: 0.3s; margin-bottom: 15px;
        }
        .form-input:focus { border-color: #f59e0b; background: #0f172a; box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1); }
        
        .btn-submit-modal { 
            width: 100%; background: var(--gold-gradient); color: #000; border: none; 
            padding: 16px; border-radius: 8px; font-weight: 700; cursor: pointer; 
            transition: 0.3s; font-size: 1rem; margin-top: 10px;
        }
        .btn-submit-modal:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(245, 158, 11, 0.4); }

        /* FAQ Styling */
        #faq-container { display: none; margin-top: 30px; }
        #faq-container.visible { display: block; animation: fadeIn 0.5s ease; }
        .faq-item {
            background: var(--bg-card); border: 1px solid var(--border-color);
            border-radius: 12px; margin-bottom: 10px; overflow: hidden;
            backdrop-filter: var(--glass); transition: 0.3s;
        }
        .faq-item:hover { border-color: #a855f7; }
        .faq-question {
            padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
            font-weight: 600; color: #fff; user-select: none;
        }
        .faq-answer {
            max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out, padding 0.4s ease;
            padding: 0 20px; color: var(--text-muted); background: rgba(0,0,0,0.2);
        }
        .faq-item.active .faq-answer { padding: 20px; max-height: 500px; }
        .faq-item.active .faq-question { color: #a855f7; }
        .faq-item.active i { transform: rotate(180deg); transition: 0.3s; }
        .faq-question i { transition: 0.3s; }

        /* Footer & Socials */
        footer { background: rgba(2, 6, 23, 0.6); border-top: 1px solid var(--border-color); padding: 3rem 0 2rem; margin-top: 4rem; backdrop-filter: blur(20px); }
        .footer-compact { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 30px; }
        .fc-links a { color: var(--text-muted); margin: 0 10px; font-size: 0.9rem; }
        .fc-links a:hover { color: #a855f7; }
        .social-icons-footer { display: flex; gap: 15px; margin-top: 15px; }
        .social-icon-btn {
            width: 36px; height: 36px; border-radius: 50%; background: rgba(255,255,255,0.05);
            display: grid; place-items: center; border: 1px solid var(--border-color);
            color: var(--text-muted); transition: 0.3s; font-size: 0.9rem;
        }
        .social-icon-btn:hover { background: #a855f7; color: white; transform: translateY(-3px); border-color: #a855f7; }
        
        .glass-card {
            background: var(--bg-card); backdrop-filter: var(--glass);
            border: 1px solid var(--border-color); border-radius: 16px; padding: 2rem; transition: 0.3s;
            position: relative; overflow: hidden;
        }
        .glass-card::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px; background: #a855f7; transform: scaleX(0); transform-origin: left; transition: 0.4s; }
        .glass-card:hover::after { transform: scaleX(1); }
        .glass-card:hover { transform: translateY(-5px); background: rgba(15, 23, 42, 0.6); }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .section-head { text-align: center; margin-bottom: 3rem; max-width: 700px; margin-inline: auto; }
        .section-head h2 { font-size: 2.2rem; margin-bottom: 0.5rem; color: var(--text); font-weight: 800; }

        @media (max-width: 900px) {
            .hero-btn-group { gap: 10px; }
            .btn-browse, .btn-get-started { font-size: 0.85rem; padding: 10px 18px; }
            .testi-header-row { flex-direction: column; align-items: center; text-align: center; }
            .footer-compact { flex-direction: column; text-align: center; }
            .social-icons-footer { justify-content: center; }
        }
    </style>
</head>
<body style="opacity:0; transition: opacity 0.5s ease;">

    <!-- Scroll Progress -->
    <div id="scroll-progress"></div>
    <div id="back-to-top" onclick="window.scrollTo(0,0)"><i class="fas fa-arrow-up"></i></div>

    <!-- HEADER -->
    <header id="header">
        <div class="container nav-inner">
            <a href="index.html" class="header-logo-text">
                <img src="./assets/images/logo.png" style="height:35px; width:auto;" alt="Logo">
                <div>EAST<span>LINK</span></div>
            </a>
            <div class="menu-trigger" onclick="toggleMenu()">
                <span>MENU</span>
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- MENU OVERLAY -->
    <div class="menu-overlay" id="menuOverlay">
        <div class="close-menu" onclick="toggleMenu()"><i class="fas fa-times"></i></div>
        <div class="menu-links">
            <a href="about.html" class="menu-link">About Us</a>
            <a href="careers.html" class="menu-link">Jobs</a>
            <a href="signup.html" class="menu-link">Join</a>
            <a href="#" onclick="toggleSupportModal(true); toggleMenu()" class="menu-link" style="font-size:1.5rem; color:var(--text-muted);">Support</a>
        </div>
    </div>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="hero-decoration"></div>
        <div class="hero-container">
            <h1 class="animate-slide-up">
                <span style="color:var(--primary);">CONNECT WITH</span> <br>
                <span class="animate-text-glow">EXCEPTIONAL TALENT</span>
            </h1>
            <p class="animate-slide-up" style="animation-delay: 0.1s;">
                EastLink bridges the gap between top-tier professionals and trusted employers across East Africa with verified data, guaranteed contracts, and speed.
            </p>
            <div class="hero-btn-group animate-slide-up" style="animation-delay: 0.2s;">
                <a href="careers.html" class="btn-browse"><i class="fas fa-briefcase"></i> Browse Jobs</a>
                <a href="signup.html" class="btn-get-started">Get Started <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>

    <!-- TICKER STRIP (Endless Animation - Red Section) -->
    <div class="ticker-strip animate-slide-up" style="animation-delay: 0.3s;">
        <!-- Marquee Track populated by JS -->
        <div class="ticker-track" id="heroTickerTrack">
            <div style="color:var(--text-muted); padding-left:20px;">Loading success stories...</div>
        </div>
    </div>

    <!-- SEARCH SECTION (Golden Accent) -->
    <div class="search-strip" data-aos="fade-up">
        <div class="container">
            <div class="search-container">
                <div class="search-input-wrap">
                    <!-- Golden Icon -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" id="mainSearchInput" placeholder="Search by job title, skill, or keyword...">
                </div>
                <!-- Golden Button -->
                <button class="search-btn" onclick="performSearch()">Search</button>
            </div>
            <div class="trending-tags" id="tagsContainer">
                Trending: <span class="tag-pill" onclick="fillSearch('Accounting')">Accounting</span> <span class="tag-pill" onclick="fillSearch('Engineering')">Engineering</span> <span class="tag-pill" onclick="fillSearch('Sales')">Sales</span>
            </div>
        </div>
    </div>

    <!-- FEATURED JOBS SECTION -->
    <section class="section" id="featured-jobs" style="padding-top: 2rem;">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>LATEST OPPORTUNITIES</div><h2>Urgently Hiring</h2></div>
            <div class="grid-3" id="featuredJobsGrid">
                <!-- Jobs Loaded via JS -->
                <div style="text-align:center; grid-column: 1/-1; color:var(--text-muted);">
                    <i class="fas fa-spinner fa-spin"></i> Loading urgently hiring positions...
                </div>
            </div>
            <div style="text-align:center; margin-top:30px;">
                <a href="careers.html" style="color:#a855f7; font-weight:600; font-size:0.9rem;">View All Jobs <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>

    <!-- PROCESS SECTION -->
    <section class="section" id="process">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>HOW IT WORKS</div><h2>Simple, Transparent, Verified</h2></div>
            <div class="grid-3">
                <div class="glass-card" data-aos="fade-up">
                    <i class="fas fa-user-shield fa-2x" style="color:#a855f7; margin-bottom:15px;"></i>
                    <h3>1. Create Profile</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Build your digital resume with verified credentials and identity checks for higher trust scores.</p>
                </div>
                <div class="glass-card" data-aos="fade-up" data-aos-delay="100">
                    <i class="fas fa-rocket fa-2x" style="color:#a855f7; margin-bottom:15px;"></i>
                    <h3>2. Explore Jobs</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Access curated opportunities across East Africa with real-time application tracking.</p>
                </div>
                <div class="glass-card" data-aos="fade-up" data-aos-delay="200">
                    <i class="fas fa-handshake-simple fa-2x" style="color:#a855f7; margin-bottom:15px;"></i>
                    <h3>3. Get Hired</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Secure digital contracts, negotiate terms, and start your new career journey immediately.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- INDUSTRIES SECTION -->
    <section class="section" style="background: rgba(30, 41, 59, 0.15);">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>SECTORS</div><h2>Industries We Serve</h2></div>
            <div class="grid-3">
                 <div class="glass-card" style="text-align:center;">
                     <i class="fas fa-building fa-2x" style="color:var(--text-muted); margin-bottom:10px;"></i>
                     <h3>Corporate</h3><p style="color:var(--text-muted); font-size:0.85rem;">Finance, HR, Administration & Legal</p>
                 </div>
                 <div class="glass-card" style="text-align:center;">
                     <i class="fas fa-hard-hat fa-2x" style="color:var(--text-muted); margin-bottom:10px;"></i>
                     <h3>Industrial</h3><p style="color:var(--text-muted); font-size:0.85rem;">Construction, Engineering & Manufacturing</p>
                 </div>
                 <div class="glass-card" style="text-align:center;">
                     <i class="fas fa-laptop-code fa-2x" style="color:var(--text-muted); margin-bottom:10px;"></i>
                     <h3>Technology</h3><p style="color:var(--text-muted); font-size:0.85rem;">Software Development, IT Security & Data</p>
                 </div>
            </div>
        </div>
    </section>

    <!-- TESTIMONIALS SECTION (COLLAPSED) -->
    <section class="section" id="testimonials">
        <div class="container">
            <div class="testi-header-row" data-aos="fade-up">
                <div style="max-width:500px; text-align:left;">
                    <div style="font-family:'Cinzel'; color:#f59e0b; font-weight:700;">SUCCESS STORIES</div>
                    <h2 style="font-family:'Cinzel'; font-size:2rem; margin-top:5px;">Satisfied Users</h2>
                </div>
                <!-- Golden Button -->
                <button class="btn-trigger-story" onclick="toggleStoryModal(true)">
                    <i class="fas fa-pen-fancy"></i> Share Your Experience
                </button>
            </div>
        </div>
        
        <!-- Toggle Content -->
        <div class="container" style="text-align:center;">
            <button class="btn-toggle-section" id="btnShowStories" onclick="toggleStories()">View Recent Stories <i class="fas fa-chevron-down"></i></button>
            <div class="stories-grid" id="storiesContainer">
                <!-- Stories loaded here -->
            </div>
        </div>
    </section>

    <!-- FAQ SECTION (COLLAPSED) -->
    <section class="section" id="faq">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>SUPPORT</div><h2>Frequently Asked Questions</h2></div>
            
            <div style="text-align:center;">
                <button class="btn-toggle-section" id="btnShowFaq" onclick="toggleFaqSection()">View Frequently Asked Questions <i class="fas fa-chevron-down"></i></button>
            </div>

            <!-- FAQ Container (Hidden by default) -->
            <div id="faq-container" style="max-width:800px; margin:0 auto;">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">What is EastLink Recruiters? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">EastLink Recruiters connects job seekers with verified employers through a digital platform that manages applications, payments, and placement tracking securely.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">Do I need to upload my CV? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">No. EastLink uses a fully digital profile system. The info in your "My Profile" section acts as your resume.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">What are the membership fees? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">Standard: KES 330 | Featured: KES 550 | Urgently Hiring/Guaranteed: KES 850.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">Is placement guaranteed? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">Placement is guaranteed only for the Urgently Hiring and Guaranteed Jobs tiers. If not hired within the stipulated time, you may be eligible for a refund or extension.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">How do I pay? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">Use M-Pesa Buy Goods Till Number 3076015. Ensure you enter the M-Pesa code in the verification input after paying.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-compact">
                <div>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <img src="./assets/images/logo.png" style="height:30px;" alt="Logo">
                        <span style="font-family:'Cinzel'; font-weight:700;">EAST<span style="color:var(--primary);">LINK</span></span>
                    </div>
                    <div class="social-icons-footer" id="socialLinksContainer">
                        <!-- Icons loaded via JS (Defaults or Database) -->
                        <span style="font-size:0.8rem; color:var(--text-muted);">Loading...</span>
                    </div>
                </div>
                <div class="fc-links">
                    <a href="about.html">About</a>
                    <a href="careers.html">Jobs</a>
                    <a href="signin.html">Login</a>
                    <a href="terms.html">Terms</a>
                    <a href="privacy.html">Privacy</a>
                </div>
                <div style="color:var(--text-muted); font-size:0.85rem;">&copy; <span id="year"></span> EastLink.</div>
            </div>
        </div>
    </footer>

    <!-- STORY SUBMISSION MODAL (PROFESSIONAL STYLE) -->
    <div class="modal-overlay" id="storyModal">
        <div class="modal-content-page">
            <div class="modal-close-page" onclick="toggleStoryModal(false)"><i class="fas fa-times"></i></div>
            
            <div style="text-align:center; margin-bottom:30px;">
                <i class="fas fa-pen-nib fa-2x" style="color:#f59e0b; margin-bottom:15px;"></i>
                <h3 style="font-family:'Cinzel'; color:#fff; font-size:1.8rem;">Share Your Experience</h3>
                <p style="color:var(--text-muted); margin-top:10px;">Your success inspires the next generation of talent.</p>
            </div>
            
            <form id="testiForm">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" id="tName" class="form-input" placeholder="e.g. John Kamau" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number (Verification Only)</label>
                    <input type="tel" id="tPhone" class="form-input" placeholder="07XX XXX XXX" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Location / City</label>
                    <input type="text" id="tLoc" class="form-input" placeholder="e.g. Nairobi" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Your Success Story</label>
                    <textarea id="tMsg" class="form-input" rows="6" placeholder="Tell us about your journey, how long it took, and your experience with EastLink..." required></textarea>
                </div>
                <div class="form-group" style="display:flex; gap:10px; align-items:flex-start;">
                    <input type="checkbox" required style="margin-top:4px; accent-color:#f59e0b;">
                    <small style="color:var(--text-muted);">I consent to sharing this story publicly on EastLink platforms.</small>
                </div>
                <button type="submit" class="btn-submit-modal">Submit Story</button>
            </form>
        </div>
    </div>

    <!-- SUPPORT MODAL (Standard Popup) -->
    <div class="modal-overlay" id="supportModal">
        <div class="modal-content" style="background: rgba(15, 23, 42, 0.95); border: 1px solid #a855f7; border-radius: 20px; width: 100%; max-width: 500px; padding: 30px; position: relative;">
            <div class="modal-close" onclick="toggleSupportModal(false)" style="position: absolute; top: 15px; right: 15px; width: 32px; height: 32px; background: rgba(255,255,255,0.1); border-radius: 50%; display: grid; place-items: center; cursor: pointer; color: #e2e8f0;"><i class="fas fa-times"></i></div>
            <div style="text-align:center; margin-bottom:20px;">
                <h3 style="font-family:'Cinzel'; color:#a855f7; font-size:1.5rem;">Contact Support</h3>
                <p style="color:var(--text-muted); font-size:0.9rem;">We typically reply within 24 hours.</p>
            </div>
            
            <form id="supportForm">
                <div class="form-group">
                    <label class="form-label">Your Name</label>
                    <input type="text" id="sName" class="form-input" placeholder="Your Full Name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email or Phone</label>
                    <input type="text" id="sContact" class="form-input" placeholder="How can we reach you?" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Subject</label>
                    <select id="sSubject" class="form-input">
                        <option value="General Inquiry">General Inquiry</option>
                        <option value="Payment Issue">Payment Issue</option>
                        <option value="Account Help">Account Help</option>
                        <option value="Report a Bug">Report a Bug</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Message</label>
                    <textarea id="sMsg" class="form-input" rows="4" placeholder="Describe your issue..." required></textarea>
                </div>
                <button type="submit" class="btn-submit-modal" style="background: var(--purple-gradient); color:white; box-shadow:none;">Send Message</button>
            </form>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        // =========================================================
        // 1. IMPORT FIREBASE FROM CONFIG.JS
        // =========================================================
        import { auth, db } from './config.js'; 
        
        // Import specific Firestore functions needed for this page
        import { 
            collection, query, orderBy, limit, getDocs, doc, getDoc, 
            addDoc, serverTimestamp, onSnapshot, where 
        } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
        
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

        // =========================================================
        // 2. UI LOGIC & ANIMATIONS
        // =========================================================
        AOS.init({ duration: 600, offset: 50, once: true });
        document.getElementById("year").textContent = new Date().getFullYear();

        window.toggleMenu = () => { document.getElementById('menuOverlay').classList.toggle('active'); };
        
        // Collapsible FAQ Logic
        window.toggleFaq = (el) => { 
            const item = el.parentElement;
            item.classList.toggle('active'); 
        };

        // Toggle Entire FAQ Section
        window.toggleFaqSection = () => {
            const container = document.getElementById('faq-container');
            const btn = document.getElementById('btnShowFaq');
            
            if (container.classList.contains('visible')) {
                container.classList.remove('visible');
                btn.innerHTML = 'View Frequently Asked Questions <i class="fas fa-chevron-down"></i>';
            } else {
                container.classList.add('visible');
                btn.innerHTML = 'Hide Questions <i class="fas fa-chevron-up"></i>';
            }
        };
        
        // Modal Logic
        window.toggleStoryModal = (open) => {
            const modal = document.getElementById('storyModal');
            open ? modal.classList.add('open') : modal.classList.remove('open');
        };

        window.toggleSupportModal = (open) => {
            const modal = document.getElementById('supportModal');
            open ? modal.classList.add('open') : modal.classList.remove('open');
        };

        // SEARCH LOGIC (Redirects to careers.html with query)
        window.fillSearch = (val) => { document.getElementById('mainSearchInput').value = val; };
        
        window.performSearch = () => {
            const val = document.getElementById('mainSearchInput').value.trim();
            if(val) {
                // Redirect to careers page with search param
                window.location.href = `careers.html?search=${encodeURIComponent(val)}`;
            }
        };

        // Toggle Details Logic for 3D Cards
        window.toggleDetails = (btn) => {
            const card = btn.closest('.job-card'); 
            const details = card.querySelector('.job-details-expanded');
            
            if (details.classList.contains('active')) {
                details.classList.remove('active');
                // Icon only for view button to save space
                btn.innerHTML = 'View'; 
            } else {
                details.classList.add('active');
                btn.innerHTML = 'Hide';
            }
        };

        // Scroll Logic
        window.addEventListener('scroll', () => {
            const bar = document.getElementById("scroll-progress");
            const btn = document.getElementById("back-to-top");
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            if(bar) bar.style.width = (winScroll / height) * 100 + "%";
            if(winScroll > 600) btn.classList.add("visible"); else btn.classList.remove("visible");
        });

        // =========================================================
        // 3. FIREBASE DATA LOGIC
        // =========================================================

        // MAINTENANCE & AUTH CHECK
        onSnapshot(doc(db, "site_settings", "config"), (docSnap) => {
            if(docSnap.exists() && docSnap.data().maintenanceMode) {
                const user = auth.currentUser;
                if(user) {
                     getDoc(doc(db, "users", user.uid)).then(snap => {
                         if(!snap.exists() || (snap.data().role !== 'admin' && snap.data().role !== 'owner')) {
                             window.location.replace('maintenance.html');
                         } else {
                             document.body.style.opacity = '1';
                         }
                     }).catch(() => window.location.replace('maintenance.html'));
                } else {
                    window.location.replace('maintenance.html');
                }
            } else {
                checkAuthRedirect();
            }
        });

        function checkAuthRedirect() {
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    try {
                        const snap = await getDoc(doc(db, "users", user.uid));
                        if (snap.exists()) {
                            const role = snap.data().role;
                            if (role === 'employer') window.location.replace('employer-dashboard.html');
                            else if (role === 'admin' || role === 'owner') window.location.replace('admin-dashboard.html');
                            else window.location.replace('seeker-dashboard.html');
                        } else {
                             document.body.style.opacity = '1'; 
                        }
                    } catch(e) { document.body.style.opacity = '1'; }
                } else { 
                    document.body.style.opacity = '1'; 
                }
            });
        }

        // LOAD SOCIAL MEDIA LINKS (With Defaults)
        async function loadSocialLinks() {
            const container = document.getElementById('socialLinksContainer');
            
            const defaults = {
                facebook: "https://facebook.com",
                instagram: "https://instagram.com",
                tiktok: "https://tiktok.com",
                linkedin: "https://linkedin.com",
                whatsapp: "254119524616" 
            };

            try {
                const docSnap = await getDoc(doc(db, "site_settings", "social_links"));
                let data = {};
                if(docSnap.exists()) data = docSnap.data();

                const fb = data.facebook || defaults.facebook;
                const tw = data.twitter; 
                const ig = data.instagram || defaults.instagram;
                const li = data.linkedin || defaults.linkedin;
                const tt = data.tiktok || defaults.tiktok;
                const wa = data.whatsapp || defaults.whatsapp;

                let html = '';
                if(fb) html += `<a href="${fb}" target="_blank" class="social-icon-btn"><i class="fab fa-facebook-f"></i></a>`;
                if(tw) html += `<a href="${tw}" target="_blank" class="social-icon-btn"><i class="fab fa-x-twitter"></i></a>`;
                if(ig) html += `<a href="${ig}" target="_blank" class="social-icon-btn"><i class="fab fa-instagram"></i></a>`;
                if(li) html += `<a href="${li}" target="_blank" class="social-icon-btn"><i class="fab fa-linkedin-in"></i></a>`;
                if(tt) html += `<a href="${tt}" target="_blank" class="social-icon-btn"><i class="fab fa-tiktok"></i></a>`;
                if(wa) html += `<a href="https://wa.me/${wa}" target="_blank" class="social-icon-btn"><i class="fab fa-whatsapp"></i></a>`;
                
                container.innerHTML = html || '';
                
            } catch(e) { 
                console.log("Social load error", e);
            }
        }
        loadSocialLinks();

        // LOAD URGENTLY HIRING JOBS
        async function loadFeaturedJobs() {
            const grid = document.getElementById('featuredJobsGrid');
            const targetNumber = "254119524616"; // Admin WA Number
            
            const renderCards = (querySnapshot) => {
                if(querySnapshot.empty) {
                    grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; color:var(--text-muted);">No urgent positions available at the moment.</div>';
                    return;
                }

                grid.innerHTML = '';
                querySnapshot.forEach(docSnap => {
                    const job = docSnap.data();
                    const jobId = docSnap.id;
                    const applyLink = `signin.html?redirect=${encodeURIComponent('seeker-job-details.html?id=' + jobId)}`;
                    
                    // Logo Logic
                    let logoHtml = '';
                    if (job.employerLogo) {
                        logoHtml = `<div class="j-logo"><img src="${job.employerLogo}" alt="Logo"></div>`;
                    } else {
                        const initial = (job.company || 'C').charAt(0).toUpperCase();
                        logoHtml = `<div class="j-logo"><div class="j-logo-text">${initial}</div></div>`;
                    }

                    // Salary Display
                    let salaryDisplay = `<span style="filter: blur(5px); opacity:0.7;">KES XX,XXX</span> <span style="font-size:0.7rem; color:#a855f7; text-transform:uppercase; margin-left:5px;"><i class="fas fa-lock"></i> Login</span>`;
                    
                    // Description Truncate
                    const description = job.description ? job.description.substring(0, 300) + '...' : 'No description available. Login to view more.';

                    // WhatsApp Logic
                    const waText = `Hello, I am inquiring about the ${job.title} position in ${job.location || 'your company'}. Is this still open?`;
                    const waLink = `https://wa.me/${targetNumber}?text=${encodeURIComponent(waText)}`;

                    grid.innerHTML += `
                        <div class="job-card" data-aos="fade-up">
                            <div class="job-head">
                                ${logoHtml}
                                <div class="j-details">
                                    <h3>${job.title}</h3>
                                    <p>${job.company}</p>
                                </div>
                            </div>
                            
                            <div class="j-tags">
                                <span class="j-tag"><i class="fas fa-map-marker-alt" style="font-size:0.7rem; margin-right:4px;"></i> ${job.location || 'Remote'}</span>
                                <span class="j-tag"><i class="fas fa-briefcase" style="font-size:0.7rem; margin-right:4px;"></i> ${job.type || 'Full Time'}</span>
                            </div>

                            <div class="j-salary">${salaryDisplay}</div>

                            <div class="job-details-expanded">${description}</div>

                            <div class="job-actions">
                                <button onclick="toggleDetails(this)" class="btn-job-action btn-view-card">View</button>
                                <a href="${applyLink}" class="btn-job-action btn-apply-card">Apply</a>
                                <a href="${waLink}" target="_blank" class="btn-job-action btn-whatsapp-card"><i class="fab fa-whatsapp"></i></a>
                            </div>
                        </div>
                    `;
                });
            };

            try {
                // Try fetching urgent
                const q = query(collection(db, "jobs"), where("status", "==", "active"), where("tier", "==", "urgent"), orderBy("postedAt", "desc"), limit(4));
                const snap = await getDocs(q);
                if(snap.empty) throw new Error("No urgent jobs");
                renderCards(snap);
            } catch(e) {
                // Fallback to latest
                try {
                    const fallbackQ = query(collection(db, "jobs"), orderBy("postedAt", "desc"), limit(4));
                    const fallbackSnap = await getDocs(fallbackQ);
                    if(!fallbackSnap.empty) renderCards(fallbackSnap);
                    else { const finalQ = query(collection(db, "jobs"), limit(4)); const finalSnap = await getDocs(finalQ); renderCards(finalSnap); }
                } catch (err2) { grid.innerHTML = `<div style="grid-column:1/-1; text-align:center; color:var(--text-muted);">Unable to load jobs.</div>`; }
            }
        }
        loadFeaturedJobs();

        // LOAD TESTIMONIALS (ENDLESS MARQUEE)
        async function loadTestimonialMarquee() {
            const track = document.getElementById('heroTickerTrack');
            
            try {
                // Fetch 5 latest approved stories
                const q = query(collection(db, "testimonials"), where("status", "==", "approved"), orderBy("timestamp", "desc"), limit(5));
                const snap = await getDocs(q);
                
                if(snap.empty) {
                    track.innerHTML = '<div style="color:var(--text-muted); padding-left:20px;">No stories available yet.</div>';
                    return;
                }

                let itemsHtml = '';
                snap.forEach(docSnap => {
                    const data = docSnap.data();
                    const shortMsg = data.message.length > 50 ? data.message.substring(0, 50) + "..." : data.message;
                    
                    itemsHtml += `
                        <div class="ticker-item">
                            <i class="fas fa-quote-left"></i>
                            <span>"${shortMsg}" - <strong>${data.name}</strong></span>
                        </div>
                    `;
                });

                // Duplicate the items multiple times to create the seamless endless effect
                track.innerHTML = itemsHtml + itemsHtml + itemsHtml + itemsHtml;

            } catch(e) {
                console.error("Ticker Error:", e);
                // Fallback content
                track.innerHTML = `<div class="ticker-item"><i class="fas fa-check-circle"></i> <span>EastLink is the #1 Platform for jobs.</span></div>`;
            }
        }
        loadTestimonialMarquee();

        // TOGGLE & LOAD RECENT STORIES (GRID in Main Section)
        window.toggleStories = async () => {
            const container = document.getElementById('storiesContainer');
            const btn = document.getElementById('btnShowStories');

            if (container.classList.contains('visible')) {
                container.classList.remove('visible');
                btn.innerHTML = 'View Recent Stories <i class="fas fa-chevron-down"></i>';
            } else {
                btn.innerHTML = 'Loading <i class="fas fa-spinner fa-spin"></i>';
                
                try {
                    const q = query(collection(db, "testimonials"), where("status", "==", "approved"), orderBy("timestamp", "desc"), limit(5));
                    const snap = await getDocs(q);

                    if (snap.empty) {
                        container.innerHTML = '<div style="grid-column:1/-1; color:var(--text-muted);">No stories available yet.</div>';
                    } else {
                        let html = '';
                        snap.forEach(docSnap => {
                            const data = docSnap.data();
                            const initial = data.name ? data.name.charAt(0).toUpperCase() : 'U';
                            html += `
                                <div class="testi-card">
                                    <div class="testi-user">
                                        <div class="testi-avatar">${initial}</div>
                                        <div>
                                            <h4 style="margin:0; font-size:1.1rem; color:white;">${data.name}</h4>
                                            <small style="color:var(--text-muted); font-size:0.8rem;">${data.location || 'Verified User'}</small>
                                        </div>
                                    </div>
                                    <div class="testi-msg">${data.message}</div>
                                </div>
                            `;
                        });
                        container.innerHTML = html;
                    }
                    container.classList.add('visible');
                    btn.innerHTML = 'Hide Stories <i class="fas fa-chevron-up"></i>';
                    
                } catch(e) {
                    console.error(e);
                    btn.innerHTML = 'Error Loading Stories';
                }
            }
        }

        // SUBMIT TESTIMONIAL
        document.getElementById('testiForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Submitting...";
            btn.disabled = true;

            try {
                await addDoc(collection(db, "testimonials"), {
                    name: document.getElementById('tName').value,
                    phone: document.getElementById('tPhone').value,
                    location: document.getElementById('tLoc').value,
                    message: document.getElementById('tMsg').value,
                    status: 'pending',
                    timestamp: serverTimestamp(),
                    source: 'user_submission'
                });
                alert("Thank you! Your story has been submitted for review.");
                e.target.reset();
                toggleStoryModal(false);
            } catch(e) {
                alert("Error submitting. Try again.");
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        });

        // SUBMIT SUPPORT MESSAGE
        document.getElementById('supportForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Sending...";
            btn.disabled = true;

            try {
                await addDoc(collection(db, "support_messages"), {
                    name: document.getElementById('sName').value,
                    contact: document.getElementById('sContact').value,
                    subject: document.getElementById('sSubject').value,
                    message: document.getElementById('sMsg').value,
                    status: 'unread',
                    timestamp: serverTimestamp()
                });
                alert("Message sent! Our support team will contact you shortly.");
                e.target.reset();
                toggleSupportModal(false);
            } catch(e) {
                alert("Error sending message. Please try WhatsApp.");
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        });

        // PWA LOGIC
        if ('serviceWorker' in navigator) { 
            window.addEventListener('load', () => { 
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed: ', err));
            }); 
        }

        let deferredPrompt;
        const pwaPopup = document.getElementById('pwa-install-popup');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            setTimeout(() => { if(pwaPopup) pwaPopup.style.display = 'block'; }, 3000);
        });

        document.getElementById('pwa-install-btn')?.addEventListener('click', async () => {
            if(pwaPopup) pwaPopup.style.display = 'none';
            if (deferredPrompt) { 
                deferredPrompt.prompt(); 
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null; 
            }
        });

        document.getElementById('pwa-dismiss')?.addEventListener('click', () => { 
            if(pwaPopup) pwaPopup.style.display = 'none'; 
        });

    </script>
</body>
</html>
