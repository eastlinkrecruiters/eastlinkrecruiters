<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="EastLink - The elite platform connecting exceptional talent with trusted employers.">
    <title>EastLink | Elite Talent Connection</title>
    
    <meta name="theme-color" content="#020617">

    <!-- PWA Manifest & Favicon -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/svg+xml" href="./assets/images/favicon.svg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons & Animation -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Using Lottie Player -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <style>
        /* =========================================
           THEME VARIABLES & BASICS
           ========================================= */
        :root {
            --primary: #f59e0b; 
            /* Golden Gradient for Text */
            --gold-text: linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #d97706 100%);
            --purple-gradient: linear-gradient(135deg, #a855f7 0%, #7e22ce 100%);
            --gold-gradient: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            --deep-navy: #020617;
            --glass: blur(16px); /* Increased blur for better transparency feel */
            --text: #ffffff;
            --text-muted: #94a3b8;   
            --border-color: rgba(255, 255, 255, 0.08); 
            --header-height: 70px;
            --transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--deep-navy); 
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            opacity: 0; /* Hidden by default until preloader finishes */
            transition: opacity 0.8s ease-out;
        }

        /* RESTORED BACKGROUND LOGIC */
        body::before {
            content: ''; position: fixed; inset: 0;
            background-image: url('./assets/images/background.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -5;
            opacity: 1; 
        }

        body::after {
            content: ''; position: fixed; inset: 0;
            background: rgba(2, 6, 23, 0.2); /* Reduced opacity for more visibility */
            z-index: -4; pointer-events: none;
        }

        h1, h2, h3, h4, .brand-font { font-family: 'Cinzel', serif; font-weight: 700; }
        a { text-decoration: none; color: inherit; transition: var(--transition); }
        img { max-width: 100%; display: block; }

        .container { width: 100%; max-width: 1280px; margin: 0 auto; padding: 0 1.5rem; }
        .section { padding: 4rem 0; position: relative; z-index: 2; } 

        /* PRELOADER */
        #preloader {
            position: fixed; inset: 0; background: #020617; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s ease, visibility 0.5s;
        }
        .loader-logo { font-family: 'Cinzel', serif; font-size: 2rem; font-weight: 800; margin-bottom: 20px; letter-spacing: 2px; }
        .loader-logo span { color: #f59e0b; }
        .spinner {
            width: 40px; height: 40px; border: 3px solid rgba(245, 158, 11, 0.3);
            border-radius: 50%; border-top-color: #f59e0b;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Scroll Progress */
        #scroll-progress {
            position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg, #a855f7, #f59e0b);
            z-index: 2000; width: 0%; transition: width 0.1s;
        }

        /* Back To Top */
        #back-to-top {
            position: fixed; bottom: 30px; right: 30px; width: 45px; height: 45px;
            background: rgba(15, 23, 42, 0.4); border: 1px solid var(--border-color);
            backdrop-filter: blur(10px); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: #a855f7; font-size: 1.1rem; cursor: pointer; opacity: 0; pointer-events: none;
            transition: var(--transition); z-index: 999;
        }
        #back-to-top.visible { opacity: 1; pointer-events: all; }
        #back-to-top:hover { background: #a855f7; color: #fff; transform: translateY(-5px); }

        /* =========================================
           HERO SECTION
           ========================================= */
        .hero {
            position: relative;
            min-height: 95vh; 
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding-top: var(--header-height); 
            padding-bottom: 2rem;
        }

        /* Hero Backgrounds */
        .hero::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('./assets/images/herosection.png');
            background-size: cover; background-position: center center;
            filter: blur(8px) brightness(0.6); -webkit-filter: blur(8px) brightness(0.6);
            transform: scale(1.1); z-index: -3;
        }
        
        .hero-bg-gradient {
            position: absolute; inset: 0;
            background: radial-gradient(circle at 50% 30%, rgba(30, 27, 75, 0.25) 0%, rgba(2, 6, 23, 0.7) 70%),
                        linear-gradient(180deg, rgba(2,6,23,0) 0%, rgba(2,6,23,1) 100%);
            z-index: -2;
            animation: shiftHue 20s infinite alternate linear;
        }
        @keyframes shiftHue {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(15deg); }
        }

        .hero-mesh {
            position: absolute; inset: 0; z-index: -1; opacity: 0.3;
            background-image: radial-gradient(rgba(168, 85, 247, 0.3) 1px, transparent 1px);
            background-size: 40px 40px;
            transform-style: preserve-3d;
            animation: meshFloat 10s infinite alternate ease-in-out;
        }
        @keyframes meshFloat { 0% { transform: scale(1); } 100% { transform: scale(1.02); } }

        .hero-grid {
            display: grid; grid-template-columns: 1fr; width: 100%; max-width: 900px;
            padding: 0 1.5rem; align-items: center; text-align: center;
            position: relative; z-index: 5; margin-top: -40px;
        }

        /* More Transparent Glass Panel */
        .hero-glass-panel {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 120%; height: 120%;
            background: radial-gradient(circle, rgba(168, 85, 247, 0.05) 0%, transparent 60%);
            z-index: -1; opacity: 0; transition: all 0.5s ease;
        }
        .hero-glass-panel.active { opacity: 1; }

        /* Typography */
        .hero h1 { display: flex; flex-direction: column; align-items: center; line-height: 1.1; margin-bottom: 2rem; }
        .hero-word-1 { 
            display: block; opacity: 0; transform: translateY(-20px); 
            color: #94a3b8; font-size: 1rem; letter-spacing: 6px; 
            font-family: 'Inter', sans-serif; font-weight: 600; margin-bottom: 10px; text-transform: uppercase;
        }
        .hero-word-2 { 
            display: block; opacity: 0; transform: translateY(20px); 
            font-family: 'Cinzel', serif; font-size: 2.5rem; color: white; 
            font-weight: 700; margin-bottom: 5px;
        }
        .hero-word-3 { 
            display: block; opacity: 0; transform: scale(0.9);
            font-family: 'Cinzel', serif; font-size: clamp(2.5rem, 6vw, 4.2rem); 
            font-weight: 800;
            background: var(--gold-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-size: 200% auto; animation: shimmerText 4s linear infinite; line-height: 1.1;
        }
        @keyframes shimmerText { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
        
        .enter-stage-1 { animation: fadeInDown 0.4s forwards; }
        .enter-stage-2 { animation: fadeInUp 0.4s 0.2s forwards; }
        .enter-stage-3 { animation: expandIn 0.5s 0.3s forwards; }
        @keyframes fadeInDown { to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes expandIn { to { opacity: 1; transform: scale(1); } }

        .hero-sub {
            font-size: 1.1rem; color: #cbd5e1; margin-bottom: 2.5rem; max-width: 650px;
            margin-left: auto; margin-right: auto; line-height: 1.6;
            opacity: 0; transform: translateY(15px); transition: opacity 0.5s ease, transform 0.1s linear; 
        }
        .hero-sub.visible { opacity: 1; }

        /* UPDATED HERO BUTTONS (Resized & Refined) */
        .hero-actions { 
            display: flex; justify-content: center; gap: 20px; 
            opacity: 0; transform: translateY(15px); transition: 0.4s ease 0.6s; 
        }
        .hero-actions.visible { opacity: 1; transform: translateY(0); }

        .btn-hero-primary {
            position: relative; 
            padding: 12px 28px; /* Reduced padding */
            border-radius: 50px;
            background: var(--purple-gradient);
            color: white; font-weight: 700; border: none; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            line-height: 1.2; text-align: center; 
            min-width: 130px; min-height: 52px; /* Reduced size */
            box-shadow: 0 10px 25px -5px rgba(168, 85, 247, 0.4); transition: 0.3s;
        }
        .btn-hero-primary span { font-size: 0.95rem; } /* Reduced text size */
        .btn-hero-primary:hover { transform: translateY(-3px); box-shadow: 0 15px 30px -5px rgba(168, 85, 247, 0.6); }
        .btn-hero-primary i { position: absolute; right: 15px; font-size: 0.8rem; }

        .btn-hero-secondary {
            position: relative; 
            padding: 12px 28px; /* Reduced padding */
            border-radius: 50px;
            background: rgba(15, 23, 42, 0.4); /* More transparent */
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: white; font-weight: 600; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            line-height: 1.2; text-align: center; 
            min-width: 130px; min-height: 52px; /* Reduced size */
            backdrop-filter: blur(5px); transition: 0.3s;
        }
        .btn-hero-secondary span { font-size: 0.95rem; } /* Reduced text size */
        .btn-hero-secondary:hover { border-color: #f59e0b; background: rgba(2, 6, 23, 0.7); transform: translateY(-3px); }
        .btn-hero-secondary i { position: absolute; left: 15px; font-size: 0.8rem; color: #fff; }

        /* =========================================
           NAVBAR (Gold Link + Transparency)
           ========================================= */
        header {
            position: fixed; top: 0; width: 100%; height: var(--header-height);
            z-index: 1000; transition: all 0.3s ease;
            background: transparent;
            border-bottom: 1px solid transparent;
        }
        header.scrolled {
            background: rgba(2, 6, 23, 0.85); /* Increased transparency (was 0.95) */
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .nav-inner { height: 100%; display: flex; justify-content: space-between; align-items: center; }

        .header-logo-text {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem; font-weight: 800; color: var(--text);
            letter-spacing: 1px; display: flex; align-items: center; gap: 12px;
        }
        /* UPDATED: Golden LINK */
        .header-logo-text span { 
            background: var(--gold-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            /* Fallback for non-webkit */
            color: #f59e0b; 
        }

        .menu-trigger {
            display: inline-flex; align-items: center; gap: 12px; cursor: pointer;
            padding: 8px 20px; border-radius: 99px;
            background: rgba(255,255,255,0.05); border: 1px solid var(--border-color);
            color: var(--text); font-size: 0.75rem; font-weight: 700; letter-spacing: 1px;
            transition: var(--transition);
        }
        .menu-trigger:hover { border-color: #f59e0b; background: rgba(245, 158, 11, 0.1); }

        /* Menu Overlay */
        .menu-overlay {
            position: fixed; inset: 0; 
            background: rgba(2, 6, 23, 0.95); 
            backdrop-filter: blur(25px); 
            z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: 0.3s ease;
        }
        .menu-overlay.active { opacity: 1; pointer-events: all; }
        .close-menu {
            position: absolute; top: 30px; right: 30px; width: 44px; height: 44px; border-radius: 50%;
            border: 1px solid var(--border-color); color: var(--text-muted);
            display: grid; place-items: center; cursor: pointer; transition: 0.3s; font-size: 1.2rem;
        }
        .close-menu:hover { border-color: #f59e0b; color: #f59e0b; transform: rotate(90deg); }
        .menu-links { text-align: center; display: flex; flex-direction: column; gap: 25px; }
        .menu-link { font-family: 'Cinzel', serif; font-size: 2.5rem; font-weight: 700; color: var(--text); transition: 0.3s; }
        .menu-link:hover { color: #f59e0b; text-shadow: 0 0 20px rgba(245, 158, 11, 0.4); }

        /* =========================================
           COMPONENTS (Increased Transparency)
           ========================================= */
        
        /* Ticker */
        .ticker-strip {
            background: rgba(15, 23, 42, 0.6); /* More transparent */
            border-top: 1px solid var(--border-color); 
            border-bottom: 1px solid var(--border-color);
            padding: 12px 0; backdrop-filter: blur(15px); 
            z-index: 10; position: relative; overflow: hidden; display: flex; align-items: center;
        }
        .ticker-track { display: flex; align-items: center; gap: 40px; white-space: nowrap; animation: scrollTicker 30s linear infinite; }
        .ticker-item { display: inline-flex; align-items: center; gap: 10px; color: var(--text-muted); font-size: 0.9rem; }
        .ticker-item i { color: #f59e0b; } .ticker-item span { font-weight: 500; color: #fff; }
        @keyframes scrollTicker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .ticker-strip:hover .ticker-track { animation-play-state: paused; }

        /* Search */
        .search-strip { padding: 2rem 0; position: relative; z-index: 5; }
        .search-container {
            background: rgba(15, 23, 42, 0.5); /* More transparent */
            backdrop-filter: blur(20px); border: 1px solid var(--border-color);
            border-radius: 100px; padding: 6px 8px; display: flex; align-items: center; justify-content: space-between;
            max-width: 800px; margin: 0 auto; box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }
        .search-container:hover { transform: scale(1.01); border-color: #a855f7; }
        .search-input-wrap { flex-grow: 1; position: relative; display: flex; align-items: center; padding-left: 20px; }
        .search-icon { color: #f59e0b; margin-right: 15px; font-size: 1.1rem; }
        .search-input { width: 100%; background: transparent; border: none; color: white; font-size: 1rem; outline: none; padding: 10px 0; }
        .search-btn {
            background: var(--gold-gradient); color: #000; border: none; padding: 10px 30px; border-radius: 50px;
            font-weight: 700; cursor: pointer; transition: 0.3s;
        }
        .search-btn:hover { background: #d97706; box-shadow: 0 0 15px rgba(245, 158, 11, 0.4); }
        .trending-tags { text-align: center; margin-top: 15px; font-size: 0.85rem; color: var(--text-muted); }
        .tag-pill { display: inline-block; padding: 4px 12px; border: 1px solid var(--border-color); border-radius: 20px; margin: 0 5px; cursor: pointer; transition: 0.2s; background: rgba(255,255,255,0.05); }
        .tag-pill:hover { border-color: #f59e0b; color: #f59e0b; background: rgba(245, 158, 11, 0.1); }

        /* Job Cards - More Transparent */
        .job-card {
            background: rgba(17, 24, 39, 0.5); /* Reduced opacity (was 0.7) */
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px; padding: 24px; position: relative;
            display: flex; flex-direction: column; min-height: 280px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(15px);
        }
        .job-card:hover { 
            transform: translateY(-8px); border-color: #a855f7; 
            box-shadow: 0 20px 40px -10px rgba(168, 85, 247, 0.15); 
            background: rgba(17, 24, 39, 0.6);
        }
        .job-head { display: flex; gap: 15px; align-items: flex-start; margin-bottom: 12px; }
        .j-logo { width: 45px; height: 45px; background: rgba(255,255,255,0.05); border-radius: 10px; display: grid; place-items: center; overflow: hidden; flex-shrink: 0; }
        .j-logo img { width: 100%; height: 100%; object-fit: cover; }
        .j-logo-text { font-weight: 700; font-size: 1.2rem; color: #a855f7; }
        .j-details h3 { font-size: 1rem; font-weight: 700; color: #fff; margin-bottom: 2px; }
        .j-details p { font-size: 0.8rem; color: var(--text-muted); }
        .j-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 12px; }
        .j-tag { font-size: 0.7rem; padding: 3px 8px; border-radius: 4px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.05); color: var(--text-muted); }
        .j-salary { font-family: monospace; font-size: 0.85rem; color: #10B981; font-weight: 600; padding: 8px 0; border-top: 1px solid rgba(255,255,255,0.05); margin-bottom: 12px; }
        .job-actions { margin-top: auto; display: flex; justify-content: space-between; gap: 8px; width: 100%; }
        .btn-job-action { flex: 1; text-align: center; padding: 10px 0; border-radius: 8px; font-weight: 700; cursor: pointer; text-decoration: none; transition: 0.3s; border: none; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; height: 42px; }
        .btn-view-card { background: var(--gold-gradient); color: #000; box-shadow: 0 4px 10px rgba(245, 158, 11, 0.3); }
        .btn-view-card:hover { transform: translateY(-2px); }
        .btn-apply-card { background: var(--purple-gradient); color: white; box-shadow: 0 4px 10px rgba(168, 85, 247, 0.3); }
        .btn-apply-card:hover { transform: translateY(-2px); }
        .btn-whatsapp-card { flex: 0 0 42px; background: #25D366; color: white; box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3); font-size: 1.2rem; }
        .btn-whatsapp-card:hover { transform: translateY(-2px); background: #20BA5A; }
        .job-details-expanded { margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; font-size: 0.85rem; color: #e2e8f0; display: none; border: 1px solid rgba(255,255,255,0.1); animation: fadeIn 0.3s ease; margin-bottom: 15px; }
        .job-details-expanded.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* Process & Industries - Glass Effect */
        .glass-card {
            background: rgba(15, 23, 42, 0.3); /* Significantly clearer glass (was 0.45) */
            backdrop-filter: var(--glass);
            border: 1px solid var(--border-color); border-radius: 16px; padding: 2rem; transition: 0.3s;
            position: relative; overflow: hidden;
        }
        .glass-card::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px; background: #a855f7; transform: scaleX(0); transform-origin: left; transition: 0.4s; }
        .glass-card:hover::after { transform: scaleX(1); }
        .glass-card:hover { transform: translateY(-5px); background: rgba(15, 23, 42, 0.5); border-color: rgba(168, 85, 247, 0.3); }

        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .section-head { text-align: center; margin-bottom: 3rem; max-width: 700px; margin-inline: auto; }
        .section-head h2 { font-size: 2.2rem; margin-bottom: 0.5rem; color: var(--text); font-weight: 800; }

        /* Testimonials */
        .stories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px; display: none; }
        .stories-grid.visible { display: grid; animation: fadeIn 0.4s ease; }
        .testi-card { background: rgba(15, 23, 42, 0.4); backdrop-filter: var(--glass); border: 1px solid var(--border-color); border-radius: 16px; padding: 25px; display: flex; flex-direction: column; position: relative; }
        .testi-user { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .testi-avatar { width: 40px; height: 40px; background: var(--purple-gradient); color: white; border-radius: 50%; font-weight: 800; display: grid; place-items: center; font-family: 'Cinzel'; font-size: 1rem; }
        .testi-msg { font-style: italic; color: #e2e8f0; font-size: 0.9rem; line-height: 1.6; }
        .btn-trigger-story { background: transparent; border: 1px solid #f59e0b; color: #f59e0b; padding: 10px 24px; border-radius: 50px; cursor: pointer; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; transition: 0.3s; }
        .btn-trigger-story:hover { background: var(--gold-gradient); color: #000; border-color: transparent; }
        .btn-toggle-section { background: transparent; border: 1px solid var(--border-color); color: var(--text-muted); padding: 10px 25px; border-radius: 50px; cursor: pointer; transition: 0.3s; margin: 20px auto; display: block; }
        .btn-toggle-section:hover { border-color: #a855f7; color: #a855f7; }

        /* Footer */
        footer { background: rgba(2, 6, 23, 0.5); border-top: 1px solid var(--border-color); padding: 3rem 0 2rem; margin-top: 4rem; backdrop-filter: blur(20px); }
        .footer-compact { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 30px; }
        .fc-links a { color: var(--text-muted); margin: 0 10px; font-size: 0.9rem; }
        .fc-links a:hover { color: #a855f7; }
        .social-icons-footer { display: flex; gap: 15px; margin-top: 15px; }
        .social-icon-btn { width: 36px; height: 36px; border-radius: 50%; background: rgba(255,255,255,0.05); display: grid; place-items: center; border: 1px solid var(--border-color); color: var(--text-muted); transition: 0.3s; font-size: 0.9rem; }
        .social-icon-btn:hover { background: #a855f7; color: white; transform: translateY(-3px); border-color: #a855f7; }

        /* Modals */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); z-index: 3000; display: none; align-items: center; justify-content: center; padding: 20px; opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.open { display: flex; opacity: 1; }
        .modal-content-page { background: #0f172a; border: 1px solid #f59e0b; border-radius: 20px; width: 100%; max-width: 600px; max-height: 90vh; overflow-y: auto; padding: 40px; position: relative; box-shadow: 0 0 50px rgba(245, 158, 11, 0.15); transform: translateY(20px); transition: 0.3s ease; }
        .modal-overlay.open .modal-content-page { transform: translateY(0); }
        .modal-close-page { position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(255,255,255,0.05); border-radius: 50%; display: grid; place-items: center; cursor: pointer; color: var(--text-muted); transition: 0.2s; font-size: 1.2rem; }
        .modal-close-page:hover { background: #f59e0b; color: #000; }
        .form-label { display: block; font-size: 0.8rem; color: #94a3b8; margin-bottom: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-input { width: 100%; background: #1e293b; border: 1px solid #334155; padding: 14px 16px; border-radius: 8px; color: #fff; outline: none; font-family: inherit; transition: 0.3s; margin-bottom: 15px; }
        .form-input:focus { border-color: #f59e0b; background: #0f172a; box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1); }
        .btn-submit-modal { width: 100%; background: var(--gold-gradient); color: #000; border: none; padding: 16px; border-radius: 8px; font-weight: 700; cursor: pointer; transition: 0.3s; font-size: 1rem; margin-top: 10px; }
        .btn-submit-modal:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(245, 158, 11, 0.4); }

        /* FAQ */
        #faq-container { display: none; margin-top: 30px; }
        #faq-container.visible { display: block; animation: fadeIn 0.4s ease; }
        .faq-item { background: rgba(15,23,42,0.4); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 10px; overflow: hidden; backdrop-filter: var(--glass); transition: 0.3s; }
        .faq-item:hover { border-color: #a855f7; }
        .faq-question { padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: #fff; user-select: none; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out, padding 0.4s ease; padding: 0 20px; color: var(--text-muted); background: rgba(0,0,0,0.2); }
        .faq-item.active .faq-answer { padding: 20px; max-height: 500px; }
        .faq-item.active .faq-question { color: #a855f7; }
        .faq-item.active i { transform: rotate(180deg); transition: 0.3s; }

        @media (max-width: 900px) {
            .hero h1 { font-size: 2.5rem; }
            .hero-word-3 { font-size: 3rem; }
            .hero-actions { flex-direction: row; gap: 10px; }
            .btn-hero-primary, .btn-hero-secondary { min-width: auto; padding: 10px 20px; }
        }
        
        @media (prefers-reduced-motion) {
            * { animation: none !important; transition: none !important; }
        }
    </style>
</head>
<body>

    <!-- PRELOADER -->
    <div id="preloader">
        <div class="loader-logo">EAST<span>LINK</span></div>
        <div class="spinner"></div>
    </div>

    <!-- Scroll Progress -->
    <div id="scroll-progress"></div>
    <div id="back-to-top" onclick="window.scrollTo(0,0)"><i class="fas fa-arrow-up"></i></div>

    <!-- HEADER -->
    <header id="header">
        <div class="container nav-inner">
            <a href="index.html" class="header-logo-text">
                <img src="./assets/images/logo.png" style="height:35px; width:auto;" alt="Logo">
                <div>EAST<span>LINK</span></div>
            </a>
            <div class="menu-trigger" onclick="toggleMenu()">
                <span>MENU</span>
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- MENU OVERLAY -->
    <div class="menu-overlay" id="menuOverlay">
        <div class="close-menu" onclick="toggleMenu()"><i class="fas fa-times"></i></div>
        <div class="menu-links">
            <a href="about.html" class="menu-link">About Us</a>
            <a href="careers.html" class="menu-link">Jobs</a>
            <a href="signup.html" class="menu-link">Join</a>
            <a href="#" onclick="toggleSupportModal(true); toggleMenu()" class="menu-link" style="font-size:1.5rem; color:var(--text-muted);">Support</a>
        </div>
    </div>

    <!-- IMMERSIVE HERO SECTION -->
    <section class="hero" id="heroSection">
        <div class="hero-bg-gradient"></div>
        <div class="hero-mesh"></div>
        
        <div class="hero-grid">
            <div class="hero-glass-panel" id="glassPanel"></div>
            
            <h1 id="heroHeadline">
                <span class="hero-word-1">CONNECT</span>
                <span class="hero-word-2">WITH</span>
                <span class="hero-word-3">EXCEPTIONAL TALENT</span>
            </h1>
            
            <p class="hero-sub" id="heroSub">
                EastLink bridges the gap between top-tier professionals and trusted employers across East Africa with verified data, guaranteed contracts, and speed.
            </p>
            
            <div class="hero-actions" id="heroActions">
                <a href="signup.html" class="btn-hero-primary">
                    <span style="margin-bottom:2px;">Get</span>
                    <span>Started</span> 
                    <i class="fas fa-rocket"></i>
                </a>
                <a href="careers.html" class="btn-hero-secondary">
                    <span style="margin-bottom:2px;">Browse</span>
                    <span>Jobs</span>
                    <i class="fas fa-briefcase"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- TICKER STRIP -->
    <div class="ticker-strip">
        <div class="ticker-track" id="heroTickerTrack">
            <div style="color:var(--text-muted); padding-left:20px;">Loading success stories...</div>
        </div>
    </div>

    <!-- SEARCH SECTION -->
    <div class="search-strip" data-aos="fade-up">
        <div class="container">
            <div class="search-container">
                <div class="search-input-wrap">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" id="mainSearchInput" placeholder="Search by job title, skill, or keyword...">
                </div>
                <button class="search-btn" onclick="performSearch()">Search</button>
            </div>
            <div class="trending-tags" id="tagsContainer">
                Trending: <span class="tag-pill" onclick="fillSearch('Accounting')">Accounting</span> <span class="tag-pill" onclick="fillSearch('Engineering')">Engineering</span> <span class="tag-pill" onclick="fillSearch('Sales')">Sales</span>
            </div>
        </div>
    </div>

    <!-- FEATURED JOBS SECTION -->
    <section class="section" id="featured-jobs" style="padding-top: 2rem;">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>LATEST OPPORTUNITIES</div><h2>Urgently Hiring</h2></div>
            <div class="grid-3" id="featuredJobsGrid">
                <!-- Jobs Loaded via JS -->
                <div style="text-align:center; grid-column: 1/-1; color:var(--text-muted);">
                    <i class="fas fa-spinner fa-spin"></i> Loading urgently hiring positions...
                </div>
            </div>
            <div style="text-align:center; margin-top:30px;">
                <a href="careers.html" style="color:#a855f7; font-weight:600; font-size:0.9rem;">View All Jobs <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>

    <!-- PROCESS SECTION -->
    <section class="section" id="process">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>HOW IT WORKS</div><h2>Simple, Transparent, Verified</h2></div>
            <div class="grid-3">
                <div class="glass-card" data-aos="fade-up">
                    <i class="fas fa-user-shield fa-2x" style="color:#a855f7; margin-bottom:15px;"></i>
                    <h3>1. Create Profile</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Build your digital resume with verified credentials and identity checks for higher trust scores.</p>
                </div>
                <div class="glass-card" data-aos="fade-up" data-aos-delay="100">
                    <i class="fas fa-rocket fa-2x" style="color:#a855f7; margin-bottom:15px;"></i>
                    <h3>2. Explore Jobs</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Access curated opportunities across East Africa with real-time application tracking.</p>
                </div>
                <div class="glass-card" data-aos="fade-up" data-aos-delay="200">
                    <i class="fas fa-handshake-simple fa-2x" style="color:#a855f7; margin-bottom:15px;"></i>
                    <h3>3. Get Hired</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Secure digital contracts, negotiate terms, and start your new career journey immediately.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- INDUSTRIES SECTION -->
    <section class="section">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>SECTORS</div><h2>Industries We Serve</h2></div>
            <div class="grid-3">
                 <div class="glass-card" style="text-align:center;">
                     <i class="fas fa-building fa-2x" style="color:var(--text-muted); margin-bottom:10px;"></i>
                     <h3>Corporate</h3><p style="color:var(--text-muted); font-size:0.85rem;">Finance, HR, Administration & Legal</p>
                 </div>
                 <div class="glass-card" style="text-align:center;">
                     <i class="fas fa-hard-hat fa-2x" style="color:var(--text-muted); margin-bottom:10px;"></i>
                     <h3>Industrial</h3><p style="color:var(--text-muted); font-size:0.85rem;">Construction, Engineering & Manufacturing</p>
                 </div>
                 <div class="glass-card" style="text-align:center;">
                     <i class="fas fa-laptop-code fa-2x" style="color:var(--text-muted); margin-bottom:10px;"></i>
                     <h3>Technology</h3><p style="color:var(--text-muted); font-size:0.85rem;">Software Development, IT Security & Data</p>
                 </div>
            </div>
        </div>
    </section>

    <!-- TESTIMONIALS & FAQ -->
    <section class="section" id="testimonials">
        <div class="container">
            <div class="testi-header-row" data-aos="fade-up" style="display:flex; justify-content:space-between; align-items:center;">
                <div style="max-width:500px;">
                    <div style="font-family:'Cinzel'; color:#f59e0b; font-weight:700;">SUCCESS STORIES</div>
                    <h2 style="font-family:'Cinzel'; font-size:2rem; margin-top:5px;">Satisfied Users</h2>
                </div>
                <button class="btn-trigger-story" onclick="toggleStoryModal(true)">
                    <i class="fas fa-pen-fancy"></i> Share Your Experience
                </button>
            </div>
            
            <div class="container" style="text-align:center;">
                <button class="btn-toggle-section" id="btnShowStories" onclick="toggleStories()">View Recent Stories <i class="fas fa-chevron-down"></i></button>
                <div class="stories-grid" id="storiesContainer"></div>
            </div>
        </div>
    </section>

    <section class="section" id="faq">
        <div class="container">
            <div class="section-head" data-aos="fade-up"><div>SUPPORT</div><h2>Frequently Asked Questions</h2></div>
            <div style="text-align:center;">
                <button class="btn-toggle-section" id="btnShowFaq" onclick="toggleFaqSection()">View Frequently Asked Questions <i class="fas fa-chevron-down"></i></button>
            </div>
            <div id="faq-container" style="max-width:800px; margin:0 auto;">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">What is EastLink Recruiters? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">EastLink Recruiters connects job seekers with verified employers through a digital platform that manages applications, payments, and placement tracking securely.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">Do I need to upload my CV? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">No. EastLink uses a fully digital profile system. The info in your "My Profile" section acts as your resume.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">What are the membership fees? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">Standard: KES 330 | Featured: KES 550 | Urgently Hiring/Guaranteed: KES 850.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">How do I pay? <i class="fas fa-chevron-down"></i></div>
                    <div class="faq-answer">Use M-Pesa Buy Goods Till Number 3076015. Ensure you enter the M-Pesa code in the verification input after paying.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-compact">
                <div>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <img src="./assets/images/logo.png" style="height:30px;" alt="Logo">
                        <!-- Updated Footer Logo to match Header -->
                        <span style="font-family:'Cinzel'; font-weight:700; color:white;">EAST<span style="background:var(--gold-gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; color:#f59e0b;">LINK</span></span>
                    </div>
                    <div class="social-icons-footer" id="socialLinksContainer">
                        <span style="font-size:0.8rem; color:var(--text-muted);">Loading...</span>
                    </div>
                </div>
                <div class="fc-links">
                    <a href="about.html">About</a>
                    <a href="careers.html">Jobs</a>
                    <a href="signin.html">Login</a>
                    <a href="terms.html">Terms</a>
                    <a href="privacy.html">Privacy</a>
                </div>
                <div style="color:var(--text-muted); font-size:0.85rem;">&copy; <span id="year"></span> EastLink.</div>
            </div>
        </div>
    </footer>

    <!-- STORY MODAL -->
    <div class="modal-overlay" id="storyModal">
        <div class="modal-content-page">
            <div class="modal-close-page" onclick="toggleStoryModal(false)"><i class="fas fa-times"></i></div>
            <div style="text-align:center; margin-bottom:30px;">
                <i class="fas fa-pen-nib fa-2x" style="color:#f59e0b; margin-bottom:15px;"></i>
                <h3 style="font-family:'Cinzel'; color:#fff; font-size:1.8rem;">Share Your Experience</h3>
                <p style="color:var(--text-muted); margin-top:10px;">Your success inspires the next generation of talent.</p>
            </div>
            <form id="testiForm">
                <div class="form-group"><label class="form-label">Full Name</label><input type="text" id="tName" class="form-input" placeholder="e.g. John Kamau" required></div>
                <div class="form-group"><label class="form-label">Phone</label><input type="tel" id="tPhone" class="form-input" placeholder="07XX XXX XXX" required></div>
                <div class="form-group"><label class="form-label">City</label><input type="text" id="tLoc" class="form-input" placeholder="e.g. Nairobi" required></div>
                <div class="form-group"><label class="form-label">Story</label><textarea id="tMsg" class="form-input" rows="6" placeholder="Tell us about your journey..." required></textarea></div>
                <button type="submit" class="btn-submit-modal">Submit Story</button>
            </form>
        </div>
    </div>

    <!-- SUPPORT MODAL -->
    <div class="modal-overlay" id="supportModal">
        <div class="modal-content-page">
            <div class="modal-close-page" onclick="toggleSupportModal(false)"><i class="fas fa-times"></i></div>
            <div style="text-align:center; margin-bottom:20px;">
                <h3 style="font-family:'Cinzel'; color:#a855f7; font-size:1.5rem;">Contact Support</h3>
                <p style="color:var(--text-muted);">We typically reply within 24 hours.</p>
            </div>
            <form id="supportForm">
                <div class="form-group"><label class="form-label">Name</label><input type="text" id="sName" class="form-input" required></div>
                <div class="form-group"><label class="form-label">Contact</label><input type="text" id="sContact" class="form-input" required></div>
                <div class="form-group"><label class="form-label">Subject</label><select id="sSubject" class="form-input"><option>General Inquiry</option><option>Payment Issue</option><option>Account Help</option></select></div>
                <div class="form-group"><label class="form-label">Message</label><textarea id="sMsg" class="form-input" rows="4" required></textarea></div>
                <button type="submit" class="btn-submit-modal">Send Message</button>
            </form>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        import { auth, db } from './config.js'; 
        import { 
            collection, query, orderBy, limit, getDocs, doc, getDoc, 
            addDoc, serverTimestamp, onSnapshot, where 
        } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

        // ==========================================
        // 1. PAGE ENTRY, PRELOADER & AUTH LOGIC
        // ==========================================
        
        const preloader = document.getElementById('preloader');

        function hidePreloaderAndAnimate() {
            preloader.style.opacity = '0';
            setTimeout(() => {
                preloader.style.visibility = 'hidden';
                document.body.style.opacity = '1';
                triggerHeroAnimations();
            }, 500);
        }

        // Trigger animations after preloader is gone
        function triggerHeroAnimations() {
            setTimeout(() => { document.querySelector('.hero-word-1').classList.add('enter-stage-1'); }, 100);
            setTimeout(() => { document.querySelector('.hero-word-2').classList.add('enter-stage-2'); }, 300);
            setTimeout(() => { document.querySelector('.hero-word-3').classList.add('enter-stage-3'); }, 500);
            setTimeout(() => { document.getElementById('glassPanel').classList.add('active'); }, 600);
            setTimeout(() => { document.getElementById('heroSub').classList.add('visible'); }, 700);
            setTimeout(() => { document.getElementById('heroActions').classList.add('visible'); }, 800);
            AOS.init({ duration: 400, offset: 50, once: true });
        }

        // --- AUTH CHECK & MAINTENANCE LOGIC ---
        // This runs BEFORE revealing the page content
        onSnapshot(doc(db, "site_settings", "config"), (docSnap) => {
            const maintenanceMode = docSnap.exists() ? docSnap.data().maintenanceMode : false;

            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    try {
                        const snap = await getDoc(doc(db, "users", user.uid));
                        if (snap.exists()) {
                            const role = snap.data().role;
                            
                            // Check Maintenance Mode
                            if (maintenanceMode && role !== 'admin' && role !== 'owner') {
                                window.location.replace('maintenance.html');
                                return;
                            }

                            // Smart Redirect to Dashboard
                            if (role === 'employer') window.location.replace('employer-dashboard.html');
                            else if (role === 'admin' || role === 'owner') window.location.replace('admin-dashboard.html');
                            else window.location.replace('seeker-dashboard.html');
                            return; 
                        }
                    } catch(e) { console.error("Auth error", e); }
                } 
                
                // If no user, check maintenance for guests
                if (maintenanceMode) {
                    window.location.replace('maintenance.html');
                } else {
                    // Safe to show page
                    hidePreloaderAndAnimate();
                }
            });
        });

        // ==========================================
        // 2. INTERACTIVE UI LOGIC
        // ==========================================
        
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            const heroSub = document.getElementById('heroSub');
            const scrollPos = window.scrollY;
            
            if (scrollPos > 30) header.classList.add('scrolled');
            else header.classList.remove('scrolled');

            const bar = document.getElementById("scroll-progress");
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            if(bar) bar.style.width = (scrollPos / height) * 100 + "%";

            const btn = document.getElementById("back-to-top");
            if(scrollPos > 600) btn.classList.add("visible"); else btn.classList.remove("visible");

            if(scrollPos < 600 && heroSub) {
                heroSub.style.transform = `translateY(${15 - scrollPos * 0.1}px)`;
            }
        });

        document.getElementById("year").textContent = new Date().getFullYear();
        window.toggleMenu = () => { document.getElementById('menuOverlay').classList.toggle('active'); };
        window.toggleFaq = (el) => { el.parentElement.classList.toggle('active'); };
        window.toggleFaqSection = () => {
            const c = document.getElementById('faq-container');
            const b = document.getElementById('btnShowFaq');
            c.classList.toggle('visible');
            b.innerHTML = c.classList.contains('visible') ? 'Hide Questions <i class="fas fa-chevron-up"></i>' : 'View Frequently Asked Questions <i class="fas fa-chevron-down"></i>';
        };
        window.toggleStoryModal = (open) => { const m = document.getElementById('storyModal'); open ? m.classList.add('open') : m.classList.remove('open'); };
        window.toggleSupportModal = (open) => { const m = document.getElementById('supportModal'); open ? m.classList.add('open') : m.classList.remove('open'); };
        
        window.toggleDetails = (btn) => {
            const details = btn.closest('.job-card').querySelector('.job-details-expanded');
            details.classList.toggle('active');
            btn.innerHTML = details.classList.contains('active') ? 'Hide' : 'View'; 
        };

        window.fillSearch = (val) => { document.getElementById('mainSearchInput').value = val; };
        window.performSearch = () => {
            const val = document.getElementById('mainSearchInput').value.trim();
            if(val) window.location.href = `careers.html?search=${encodeURIComponent(val)}`;
        };

        // ==========================================
        // 3. FIREBASE CONTENT LOADERS
        // ==========================================

        async function loadFeaturedJobs() {
            const grid = document.getElementById('featuredJobsGrid');
            const targetNumber = "254119524616"; 
            
            const renderCards = (querySnapshot) => {
                if(querySnapshot.empty) {
                    grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; color:var(--text-muted);">No urgent positions available at the moment.</div>';
                    return;
                }
                grid.innerHTML = '';
                querySnapshot.forEach(docSnap => {
                    const job = docSnap.data();
                    const jobId = docSnap.id;
                    const applyLink = `signin.html?redirect=${encodeURIComponent('seeker-job-details.html?id=' + jobId)}`;
                    
                    let logoHtml = job.employerLogo 
                        ? `<div class="j-logo"><img src="${job.employerLogo}" alt="Logo"></div>`
                        : `<div class="j-logo"><div class="j-logo-text">${(job.company||'C').charAt(0).toUpperCase()}</div></div>`;
                    
                    const desc = job.description ? job.description.substring(0, 150) + '...' : 'Login to view more.';
                    const waLink = `https://wa.me/${targetNumber}?text=${encodeURIComponent(`Inquiring about ${job.title} position...`)}`;

                    grid.innerHTML += `
                        <div class="job-card" data-aos="fade-up">
                            <div class="job-head">${logoHtml}<div class="j-details"><h3>${job.title}</h3><p>${job.company}</p></div></div>
                            <div class="j-tags">
                                <span class="j-tag"><i class="fas fa-map-marker-alt" style="margin-right:4px;"></i> ${job.location || 'Remote'}</span>
                                <span class="j-tag"><i class="fas fa-briefcase" style="margin-right:4px;"></i> ${job.type || 'Full Time'}</span>
                            </div>
                            <div class="j-salary"><span style="filter: blur(5px); opacity:0.7;">KES XX,XXX</span> <span style="font-size:0.7rem; color:#a855f7; text-transform:uppercase; margin-left:5px;"><i class="fas fa-lock"></i> Login</span></div>
                            <div class="job-details-expanded">${desc}</div>
                            <div class="job-actions">
                                <button onclick="toggleDetails(this)" class="btn-job-action btn-view-card">View</button>
                                <a href="${applyLink}" class="btn-job-action btn-apply-card">Apply</a>
                                <a href="${waLink}" target="_blank" class="btn-job-action btn-whatsapp-card"><i class="fab fa-whatsapp"></i></a>
                            </div>
                        </div>`;
                });
            };

            try {
                const q = query(collection(db, "jobs"), where("status", "==", "active"), where("tier", "==", "urgent"), orderBy("postedAt", "desc"), limit(3));
                const snap = await getDocs(q);
                if(snap.empty) throw new Error("No urgent");
                renderCards(snap);
            } catch(e) {
                try {
                    const q2 = query(collection(db, "jobs"), orderBy("postedAt", "desc"), limit(3));
                    const snap2 = await getDocs(q2);
                    if(!snap2.empty) renderCards(snap2);
                    else grid.innerHTML = `<div style="grid-column:1/-1; text-align:center; color:var(--text-muted);">Check back soon for new openings.</div>`;
                } catch(err){ console.log("Job load err", err); }
            }
        }
        loadFeaturedJobs();

        async function loadTestimonialMarquee() {
            const track = document.getElementById('heroTickerTrack');
            try {
                const q = query(collection(db, "testimonials"), where("status", "==", "approved"), orderBy("timestamp", "desc"), limit(5));
                const snap = await getDocs(q);
                if(snap.empty) { track.innerHTML = '<div style="color:var(--text-muted); padding-left:20px;">No stories available yet.</div>'; return; }
                let itemsHtml = '';
                snap.forEach(d => {
                    const msg = d.data().message.length > 50 ? d.data().message.substring(0,50)+"..." : d.data().message;
                    itemsHtml += `<div class="ticker-item"><i class="fas fa-quote-left"></i><span>"${msg}" - <strong>${d.data().name}</strong></span></div>`;
                });
                track.innerHTML = itemsHtml.repeat(4);
            } catch(e) { track.innerHTML = `<div class="ticker-item"><i class="fas fa-check-circle"></i> <span>EastLink is the #1 Platform for jobs.</span></div>`; }
        }
        loadTestimonialMarquee();

        window.toggleStories = async () => {
            const c = document.getElementById('storiesContainer');
            const b = document.getElementById('btnShowStories');
            if(c.classList.contains('visible')) {
                c.classList.remove('visible'); b.innerHTML = 'View Recent Stories <i class="fas fa-chevron-down"></i>';
            } else {
                b.innerHTML = 'Loading...';
                try {
                    const q = query(collection(db, "testimonials"), where("status", "==", "approved"), orderBy("timestamp", "desc"), limit(6));
                    const snap = await getDocs(q);
                    let h = '';
                    snap.forEach(d => {
                        const da = d.data();
                        h += `<div class="testi-card"><div class="testi-user"><div class="testi-avatar">${(da.name||'U').charAt(0)}</div><div><h4 style="margin:0;color:white;">${da.name}</h4><small style="color:var(--text-muted);">${da.location||'User'}</small></div></div><div class="testi-msg">${da.message}</div></div>`;
                    });
                    c.innerHTML = h || '<div style="grid-column:1/-1;color:var(--text-muted);">No stories yet.</div>';
                    c.classList.add('visible'); b.innerHTML = 'Hide Stories <i class="fas fa-chevron-up"></i>';
                } catch(e) { b.innerHTML = 'Error'; }
            }
        };

        document.getElementById('testiForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Submitting..."; btn.disabled = true;
            try {
                await addDoc(collection(db, "testimonials"), {
                    name: document.getElementById('tName').value,
                    phone: document.getElementById('tPhone').value,
                    location: document.getElementById('tLoc').value,
                    message: document.getElementById('tMsg').value,
                    status: 'pending',
                    timestamp: serverTimestamp(),
                    source: 'user_submission'
                });
                alert("Thank you! Your story has been submitted.");
                e.target.reset(); toggleStoryModal(false);
            } catch(e) { alert("Error submitting."); }
            finally { btn.innerText = originalText; btn.disabled = false; }
        });

        async function loadSocialLinks() {
            const container = document.getElementById('socialLinksContainer');
            try {
                const docSnap = await getDoc(doc(db, "site_settings", "social_links"));
                let data = docSnap.exists() ? docSnap.data() : {};
                let html = '';
                const map = { facebook: 'facebook-f', instagram: 'instagram', linkedin: 'linkedin-in', tiktok: 'tiktok', twitter: 'x-twitter' };
                Object.keys(map).forEach(key => { if(data[key]) html += `<a href="${data[key]}" target="_blank" class="social-icon-btn"><i class="fab fa-${map[key]}"></i></a>`; });
                if(data.whatsapp) html += `<a href="https://wa.me/${data.whatsapp}" target="_blank" class="social-icon-btn"><i class="fab fa-whatsapp"></i></a>`;
                container.innerHTML = html || '<span style="color:var(--text-muted);font-size:0.8rem;">Follow us</span>';
            } catch(e) { console.log("Social err"); }
        }
        loadSocialLinks();

    </script>
</body>
</html>
