<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium Resources | EastLink Recruiters</title>
    
    <!-- PWA & Meta -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/svg+xml" href="./assets/images/favicon.svg">
    <meta name="theme-color" content="#0F172A">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    <style>
        :root {
            /* Master Theme Variables */
            --bg-body: #0F172A;       
            --bg-glass: rgba(30, 41, 59, 0.70);
            --bg-glass-heavy: rgba(15, 23, 42, 0.95);
            --bg-input: rgba(255, 255, 255, 0.05);
            --bg-hover: rgba(255, 255, 255, 0.1);
            
            --border-color: rgba(255, 255, 255, 0.12);
            --border-highlight: rgba(255, 255, 255, 0.2);
            
            --text-main: #F8FAFC;     
            --text-muted: #94A3B8; 
            
            /* Accents */
            --gold-base: #D97706;
            --gold-gradient: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            --success: #10B981;
            --danger: #EF4444;
            --info: #3b82f6;
            
            --sidebar-width: 260px; 
            --header-height: 80px;
            --radius: 20px;
            
            --font-head: 'Cinzel', serif;
            --font-body: 'Inter', sans-serif;
            --font-display: 'Space Grotesk', sans-serif;
            
            --ease-snap: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: var(--font-body); 
            background-color: var(--bg-body); 
            background-image: url('./assets/images/background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text-main); 
            min-height: 100vh; 
            display: flex; flex-direction: column;
            overflow-x: hidden;
        }

        /* Overlay for contrast */
        body::before {
            content: ''; position: fixed; inset: 0;
            background: rgba(15, 23, 42, 0.85); 
            z-index: -5; pointer-events: none;
        }

        /* Glass Panel */
        .glass-panel {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-top: 1px solid var(--border-highlight);
            border-radius: var(--radius);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s var(--ease-snap), box-shadow 0.3s ease;
        }
        
        /* Header */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height);
            background: var(--bg-glass-heavy); backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            display: flex; align-items: center; justify-content: space-between; padding: 0 24px; z-index: 1000;
        }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .logo { 
            font-family: var(--font-head); font-weight: 700; color: var(--text-main); font-size: 1.4rem; 
            text-transform: uppercase; letter-spacing: 1px; text-decoration: none; display: flex; align-items: center; gap: 10px;
        }
        .logo span { background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hamburger { font-size: 1.4rem; cursor: pointer; color: var(--text-muted); display: none; }

        /* Search */
        .global-search-container { flex: 1; max-width: 500px; position: relative; margin: 0 30px; }
        .global-search-input {
            width: 100%; background: var(--bg-input); border: 1px solid var(--border-color);
            padding: 12px 45px 12px 20px; border-radius: 12px; color: var(--text-main);
            transition: all 0.3s ease; font-size: 0.95rem; font-family: var(--font-body);
        }
        .global-search-input:focus { border-color: var(--gold-base); background: rgba(255,255,255,0.08); box-shadow: 0 0 20px rgba(217, 119, 6, 0.15); }
        
        .search-results-dropdown {
            position: absolute; top: 115%; left: 0; width: 100%; background: var(--bg-glass-heavy);
            backdrop-filter: blur(20px); border: 1px solid var(--border-color); border-radius: 12px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.4); max-height: 300px; overflow-y: auto; display: none; z-index: 2000;
        }
        .search-result-item { padding: 12px 15px; border-bottom: 1px solid var(--border-color); cursor: pointer; display: flex; align-items: center; gap: 10px; transition: 0.2s; font-size: 0.9rem; }
        .search-result-item:hover { background: var(--bg-hover); padding-left: 20px; color: var(--gold-base); }

        /* Header Actions - Updated Icons */
        .header-actions { display: flex; align-items: center; gap: 15px; }
        .icon-btn { 
            width: 44px; height: 44px; display: grid; place-items: center; border-radius: 12px;
            cursor: pointer; transition: all 0.3s var(--ease-snap); position: relative;
            background: rgba(255,255,255,0.03); border: 1px solid var(--border-color);
        }
        .icon-btn:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.2); transform: translateY(-2px); }
        
        .icon-msg { color: #3b82f6; font-size: 1.1rem; filter: drop-shadow(0 0 5px rgba(59, 130, 246, 0.4)); }
        .icon-bell { color: #f59e0b; font-size: 1.1rem; filter: drop-shadow(0 0 5px rgba(245, 158, 11, 0.4)); }
        
        .notification-badge { 
            position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; 
            background: #ef4444; border: 2px solid #0f172a; 
            border-radius: 50%; font-size: 0.65rem; color: white; 
            font-weight: 700; display: none; place-items: center; justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        .profile-widget { width: 44px; height: 44px; position: relative; cursor: pointer; transition: transform 0.3s; margin-left: 5px; flex-shrink: 0; }
        .profile-widget:hover { transform: scale(1.05); }
        .user-avatar { 
            width: 100%; height: 100%; border-radius: 12px; background: var(--gold-gradient); display: grid; place-items: center; 
            font-weight: 700; color: #fff; border: 1px solid rgba(255,255,255,0.2); object-fit: cover;
        }
        .user-avatar.img-mode { background: transparent; }

        /* Sidebar (Unlocked) */
        .sidebar {
            position: fixed; top: var(--header-height); left: 0; width: var(--sidebar-width); height: calc(100vh - var(--header-height));
            background: var(--bg-glass-heavy); border-right: 1px solid var(--border-color); padding: 30px 0; overflow-y: auto; 
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 999; display: flex; flex-direction: column; backdrop-filter: blur(20px);
        }
        .nav-group { padding: 0 24px; margin-bottom: 25px; }
        .nav-label { font-size: 0.75rem; text-transform: uppercase; color: var(--text-muted); font-weight: 700; margin-bottom: 12px; letter-spacing: 1.2px; padding-left: 10px; }
        .nav-item { 
            display: flex; align-items: center; padding: 12px 16px; color: var(--text-muted); text-decoration: none; 
            font-size: 0.95rem; transition: all 0.2s ease; border-radius: 12px; margin-bottom: 5px; position: relative; font-weight: 500; cursor: pointer;
        }
        .nav-item:hover { color: var(--text-main); background: rgba(255,255,255,0.05); transform: translateX(5px); }
        .nav-item.active { background: var(--gold-gradient); color: #000; font-weight: 700; box-shadow: 0 4px 15px rgba(217, 119, 6, 0.3); }
        .nav-item i { width: 25px; text-align: center; margin-right: 12px; font-size: 1rem; }

        /* Main Content */
        main { margin-left: var(--sidebar-width); margin-top: var(--header-height); padding: 40px; width: calc(100% - var(--sidebar-width)); min-height: calc(100vh - var(--header-height)); display: flex; flex-direction: column; }
        
        .page-header { margin-bottom: 35px; display:flex; flex-direction: column; gap: 8px; }
        .page-header h2 { font-family: var(--font-head); font-size: 2rem; color: var(--text-main); font-weight: 700; display: flex; align-items: center; gap: 15px; }
        .page-header p { color: var(--text-muted); font-size: 1rem; }

        /* Tabs */
        .tab-controls { display: flex; gap: 15px; margin-bottom: 35px; overflow-x: auto; scrollbar-width: none; padding-bottom: 5px; border-bottom: 1px solid var(--border-color); }
        .tab-btn { 
            padding: 10px 20px; background: transparent; border: none; color: var(--text-muted); 
            font-size: 0.95rem; cursor: pointer; position: relative; transition: 0.3s; white-space: nowrap; font-weight: 500;
            border-radius: 8px;
        }
        .tab-btn:hover { color: var(--text-main); background: var(--bg-hover); }
        .tab-btn.active { color: #000; background: var(--gold-gradient); font-weight: 700; box-shadow: 0 4px 15px rgba(217, 119, 6, 0.2); }

        /* Resource Grid */
        .resources-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
        
        .resource-card {
            display: flex; flex-direction: column; padding: 30px; 
            position: relative; transition: all 0.4s var(--ease-snap);
            overflow: hidden; height: 100%; border-radius: 24px;
        }
        .resource-card:hover { transform: translateY(-8px); border-color: var(--gold-base); box-shadow: 0 20px 50px rgba(0,0,0,0.4); }
        
        .icon-box {
            width: 60px; height: 60px; border-radius: 16px; display: grid; place-items: center; 
            font-size: 1.6rem; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.1);
            transition: 0.4s var(--ease-snap);
        }
        .resource-card:hover .icon-box { transform: scale(1.1) rotate(5deg); }

        /* Icon Variants */
        .icon-resume { background: rgba(59, 130, 246, 0.1); color: #60a5fa; border-color: rgba(59, 130, 246, 0.2); }
        .icon-interview { background: rgba(16, 185, 129, 0.1); color: #34d399; border-color: rgba(16, 185, 129, 0.2); }
        .icon-guide { background: rgba(245, 158, 11, 0.1); color: #fbbf24; border-color: rgba(245, 158, 11, 0.2); }

        .res-title { font-family: var(--font-display); font-size: 1.25rem; color: var(--text-main); margin-bottom: 10px; font-weight: 700; }
        .res-desc { font-size: 0.9rem; color: var(--text-muted); line-height: 1.6; margin-bottom: 25px; flex-grow: 1; }

        .btn-download {
            background: rgba(255,255,255,0.05); color: var(--text-main); border: 1px solid var(--border-color); padding: 14px;
            border-radius: 12px; font-weight: 600; cursor: pointer; text-decoration: none;
            display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; font-size: 0.95rem;
        }
        .btn-download:hover { background: var(--gold-gradient); border-color: transparent; color: #000; box-shadow: 0 5px 15px rgba(217,119,6,0.3); }

        /* Footer */
        .footer { 
            margin-top: auto; padding: 40px 0 0; border-top: 1px solid var(--border-color); 
            color: var(--text-muted); font-size: 0.85rem; text-align: center; width: 100%;
        }

        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 998; backdrop-filter: blur(4px); }

        /* PWA Popup */
        .pwa-install-popup {
            position: fixed; bottom: 20px; right: 20px; 
            background: rgba(15, 23, 42, 0.95); 
            border: 1px solid rgba(245, 158, 11, 0.3);
            backdrop-filter: blur(12px);
            padding: 20px; border-radius: 16px; 
            z-index: 10000; box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            max-width: 300px; animation: slideUp 0.5s ease-out; display: none;
        }
        @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .pwa-content { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .pwa-icon { width: 50px; height: 50px; border-radius: 12px; background: var(--gold-gradient); display: grid; place-items: center; font-size: 1.5rem; color: #000; }
        .pwa-actions { display: flex; gap: 10px; }
        .btn-pwa-install { flex: 2; padding: 10px; background: var(--gold-gradient); border: none; border-radius: 10px; font-weight: 700; cursor: pointer; color: #000; }
        .btn-pwa-dismiss { flex: 1; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-muted); cursor: pointer; }

        @media (max-width: 992px) {
            .global-search-container { display: none; }
            .sidebar { transform: translateX(-100%); } .sidebar.active { transform: translateX(0); }
            main { margin-left: 0; padding: 25px 20px; width: 100%; } 
            .hamburger { display: block; }
            .page-header h2 { font-size: 1.6rem; }
            .resources-grid { grid-template-columns: 1fr; }
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block; width: 16px; height: 16px;
            border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #fff;
            animation: spin 1s ease-in-out infinite; margin-right: 5px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- HEADER -->
    <header>
        <div class="header-left">
            <i class="fas fa-bars hamburger" onclick="toggleSidebar()"></i>
            <a href="seeker-dashboard.html" class="logo">EAST<span>LINK</span></a>
        </div>
        
        <div class="global-search-container">
            <input type="text" id="searchInput" class="global-search-input" placeholder="Search resources...">
            <i class="fas fa-search" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--text-muted);"></i>
            <div id="searchResults" class="search-results-dropdown"></div>
        </div>

        <div class="header-actions">
            <!-- Messages -->
            <div class="icon-btn" onclick="handleActionWithSpinner(this, () => location.href='seeker-messages.html')">
                <i class="fa-solid fa-envelope icon-msg"></i>
                <div class="notification-badge" id="msg-badge">0</div>
            </div>
            <!-- Notifications -->
            <div class="icon-btn" onclick="handleActionWithSpinner(this, () => location.href='seeker-notifications.html')">
                <i class="fa-solid fa-bell icon-bell"></i>
                <div class="notification-badge" id="notif-badge">0</div>
            </div>
            <div class="profile-widget" onclick="handleActionWithSpinner(this, () => location.href='seeker-profile.html')">
                <img src="" id="header-avatar-img" class="user-avatar img-mode" alt="Profile" style="display:none;">
                <div id="header-avatar-fallback" class="user-avatar">U</div>
            </div>
        </div>
    </header>

    <!-- SIDEBAR (Unlocked) -->
    <nav class="sidebar" id="sidebar">
        <div class="nav-group">
            <div class="nav-label">Overview</div>
            <a href="seeker-dashboard.html" class="nav-item"><i class="fa-solid fa-compass"></i> Dashboard</a>
        </div>
        <div class="nav-group">
            <div class="nav-label">Job Hunt</div>
            <a href="seeker-applications.html" class="nav-item"><i class="fa-solid fa-file-signature"></i> Applied Jobs</a>
            <a href="seeker-jobs.html" class="nav-item"><i class="fa-solid fa-briefcase"></i> Browse Jobs</a>
            <a href="seeker-featured-jobs.html" class="nav-item"><i class="fa-solid fa-star"></i> Featured Jobs</a>
            <a href="seeker-urgentlyhiring.html" class="nav-item"><i class="fa-solid fa-bolt" style="color:var(--gold-base);"></i> Recommended</a>
            <a href="seeker-guaranteed-jobs.html" class="nav-item"><i class="fa-solid fa-shield-halved" style="color:var(--success);"></i> Guaranteed Jobs</a>
        </div>
        <div class="nav-group">
            <div class="nav-label">Finance</div>
            <a href="seeker-wallet.html" class="nav-item"><i class="fa-solid fa-wallet"></i> My Wallet</a>
            <a href="seeker-premium.html" class="nav-item"><i class="fa-solid fa-crown"></i> My Plan</a>
            <a href="seeker-referrals.html" class="nav-item"><i class="fa-solid fa-user-plus"></i> Invite & Earn</a>
            <a href="seeker-invest.html" class="nav-item"><i class="fa-solid fa-chart-line"></i> Invest</a>
        </div>
        <div class="nav-group">
            <div class="nav-label">Resources</div>
            <a href="seeker-blog.html" class="nav-item"><i class="fa-solid fa-newspaper"></i> News & Insights</a>
            <a href="seeker-resources.html" class="nav-item active"><i class="fa-solid fa-book"></i> Resources</a>
        </div>
        <div class="nav-group">
            <div class="nav-label">Settings</div>
            <a href="seeker-profile.html" class="nav-item"><i class="fa-solid fa-user-gear"></i> Profile</a>
            <a href="seeker-settings.html" class="nav-item"><i class="fa-solid fa-sliders"></i> Settings</a>
            <a href="#" onclick="handleActionWithSpinner(this, logout)" class="nav-item" style="color:var(--danger); margin-top:10px;"><i class="fa-solid fa-right-from-bracket"></i> Sign Out</a>
        </div>
    </nav>
    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

    <!-- MAIN CONTENT -->
    <main id="main-content">
        <div class="page-header animate__animated animate__fadeInDown">
            <h2><i class="fas fa-book-open" style="color:var(--gold-base)"></i> Premium Resources</h2>
            <p>Exclusive tools and guides designed to accelerate your career path.</p>
        </div>
        
        <div class="tab-controls animate__animated animate__fadeIn">
            <button class="tab-btn active" onclick="filterResources('all', this)">All</button>
            <button class="tab-btn" onclick="filterResources('resume', this)">Resumes</button>
            <button class="tab-btn" onclick="filterResources('interview', this)">Interviews</button>
            <button class="tab-btn" onclick="filterResources('guide', this)">Guides</button>
        </div>
        
        <div class="resources-grid" id="resources-grid">
            <!-- Content Injected via JS -->
            <div style="grid-column:1/-1; text-align:center; padding:50px;">
                <i class="fas fa-circle-notch fa-spin" style="font-size:2rem; color:var(--gold-base);"></i>
            </div>
        </div>

        <footer class="footer">
            <div class="copyright">&copy; 2026 EastLink Recruiters. All Rights Reserved.</div>
        </footer>
    </main>

    <!-- PWA INSTALL POPUP -->
    <div id="pwa-install-popup" class="pwa-install-popup">
        <div class="pwa-content">
            <div class="pwa-icon"><i class="fas fa-download"></i></div>
            <div>
                <div style="font-weight:700; color:#fff; font-size:1rem; margin-bottom:4px;">Install App</div>
                <div style="font-size:0.8rem; color:#94A3B8;">Add EastLink to home screen.</div>
            </div>
        </div>
        <div class="pwa-actions">
            <button class="btn-pwa-install" onclick="handleActionWithSpinner(this, installPWA)">Install</button>
            <button class="btn-pwa-dismiss" onclick="dismissPWA()">Later</button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script type="module">
        import { auth, db } from './config.js';
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
        import { doc, getDoc, collection, query, where, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        // --- SPINNER HELPER ---
        window.handleActionWithSpinner = (btn, action) => {
            if(btn.dataset.processing === "true") return;
            btn.dataset.processing = "true";
            
            // Save original content
            const originalContent = btn.innerHTML;
            
            // Set spinner content
            btn.innerHTML = `<span class="loading-spinner"></span>`;
            
            setTimeout(() => {
                // Execute action
                if (typeof action === 'function') action();
                
                // Reset button (optional, in case page doesn't reload immediately)
                setTimeout(() => {
                    btn.innerHTML = originalContent;
                    btn.dataset.processing = "false";
                }, 500);
            }, 1000);
        };

        // --- UI UTILS ---
        window.toggleSidebar = () => {
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('overlay');
            sb.classList.toggle('active');
            ov.style.display = sb.classList.contains('active') ? 'block' : 'none';
        };
        window.closeSidebar = () => {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('overlay').style.display = 'none';
        };
        window.logout = () => signOut(auth).then(() => window.location.href = 'signin.html');

        // --- DATA & CONTENT GENERATION ---
        // Enhanced content for PDFs
        const resourcesData = [
            { 
                id: "res_001",
                title: "ATS-Friendly Resume", 
                desc: "Word template optimized to pass Applicant Tracking Systems. Essential for online applications.", 
                icon: "fa-solid fa-file-word", 
                iconClass: "icon-resume", 
                category: "resume",
                filename: "ATS_Resume_Template_EastLink.pdf",
                pdfContent: `
                    1. CONTACT INFORMATION
                    [Your Name]
                    [City, State, Zip Code] | [Phone Number] | [Email Address]
                    [LinkedIn Profile URL] | [Portfolio URL (Optional)]

                    2. PROFESSIONAL SUMMARY
                    Highly motivated and results-oriented [Job Title] with [Number] years of experience in [Industry]. Proven track record of [Key Achievement 1] and [Key Achievement 2]. Adept at [Skill 1], [Skill 2], and [Skill 3]. Committed to driving business growth and operational excellence.

                    3. CORE COMPETENCIES
                    - Skill A (e.g., Project Management)
                    - Skill B (e.g., Python Programming)
                    - Skill C (e.g., Strategic Planning)
                    - Skill D (e.g., Data Analysis)

                    4. PROFESSIONAL EXPERIENCE
                    [Current/Most Recent Job Title] | [Company Name] | [City, State]
                    [Dates of Employment]
                    - Achieved [Quantifiable Result] by implementing [Specific Strategy].
                    - Led a team of [Number] to complete [Project Name] under budget and ahead of schedule.
                    - Improved [Metric] by [Percentage]% through [Action Taken].

                    [Previous Job Title] | [Company Name] | [City, State]
                    [Dates of Employment]
                    - Spearheaded [Initiative] resulting in [Outcome].
                    - Collaborated with cross-functional teams to deliver [Product/Service].

                    5. EDUCATION
                    [Degree Earned] in [Major]
                    [University Name], [City, State] | [Graduation Year]

                    6. CERTIFICATIONS
                    - [Certification Name], [Issuing Organization]
                    - [Certification Name], [Issuing Organization]

                    TIPS FOR ATS OPTIMIZATION:
                    - Avoid graphics, columns, and tables.
                    - Use standard headings (Experience, Education).
                    - Incorporate keywords from the job description.
                `
            },
            { 
                id: "res_002",
                title: "STAR Method Guide", 
                desc: "Master behavioral interview questions with this checklist. Learn to structure your answers effectively.", 
                icon: "fa-solid fa-list-check", 
                iconClass: "icon-interview", 
                category: "interview",
                filename: "STAR_Method_Guide_EastLink.pdf",
                pdfContent: `
                    MASTERING THE STAR METHOD
                    The STAR method is a structured manner of responding to behavioral interview questions by discussing the specific Situation, Task, Action, and Result of the situation you are describing.

                    S - SITUATION
                    Describe the context within which you performed a job or faced a challenge at work. Be specific.
                    "In my previous role as a Marketing Manager, our team faced a 20% drop in engagement during Q3..."

                    T - TASK
                    Describe your responsibility in that situation. What goal were you working toward?
                    "My goal was to reverse this trend and increase engagement by 15% before the end of the year..."

                    A - ACTION
                    Describe how you completed the task or endeavored to meet the challenge. Focus on what YOU did.
                    "I analyzed user data to identify pain points, launched a targeted re-engagement campaign, and A/B tested new email subject lines..."

                    R - RESULT
                    Explain the outcomes or results generated by the action taken. Quantify where possible.
                    "As a result, engagement increased by 25% in Q4, surpassing our goal, and generated an additional $10k in revenue."

                    COMMON QUESTIONS TO PRACTICE:
                    1. Tell me about a time you faced a conflict at work.
                    2. Describe a time you had to manage a tight deadline.
                    3. Give an example of a goal you didn't meet and how you handled it.
                `
            },
            { 
                id: "res_003",
                title: "Career Roadmap", 
                desc: "Workbook to define goals and identify key milestones for your 5-year plan.", 
                icon: "fa-solid fa-map-signs", 
                iconClass: "icon-guide", 
                category: "guide", 
                filename: "Career_Roadmap_EastLink.pdf",
                pdfContent: `
                    5-YEAR CAREER ROADMAP WORKBOOK

                    PHASE 1: SELF-ASSESSMENT (Current State)
                    - What are my top 3 skills?
                    - What do I enjoy doing most?
                    - What are my current weaknesses?

                    PHASE 2: THE VISION (Year 5)
                    - Job Title: ______________________
                    - Industry: _______________________
                    - Salary Goal: ____________________
                    - Work-Life Balance Ideal: ________

                    PHASE 3: MILESTONES

                    Year 1: Foundation
                    [ ] Skill to learn: _______________
                    [ ] Certification to earn: ________
                    [ ] Networking goal: ______________

                    Year 3: Growth
                    [ ] Leadership role attainment
                    [ ] specialized project completion
                    [ ] Mentor acquisition

                    Year 5: Mastery
                    [ ] Industry thought leadership
                    [ ] Strategic role transition
                    [ ] Financial independence milestones

                    ACTION PLAN FOR THIS WEEK:
                    1. Update LinkedIn Profile
                    2. Reach out to 3 contacts in desired role
                    3. Sign up for one relevant course
                `
            },
            { 
                id: "res_004",
                title: "Modern Cover Letter", 
                desc: "A compelling structure that complements your resume and highlights your unique value.", 
                icon: "fa-solid fa-file-invoice", 
                iconClass: "icon-resume", 
                category: "resume", 
                filename: "Cover_Letter_Template_EastLink.pdf",
                pdfContent: `
                    MODERN COVER LETTER STRUCTURE

                    [Your Name]
                    [City, State] | [Email] | [Phone]

                    [Date]

                    [Hiring Manager Name]
                    [Title]
                    [Company Name]

                    Dear [Hiring Manager Name],

                    OPENING PARAGRAPH (The Hook):
                    State why you are writing, name the position, and express enthusiasm. Mention a specific achievement of the company that impressed you.
                    "I was thrilled to see the opening for [Role] at [Company]. Having followed your recent success in [Project/Market], I am excited to bring my expertise in [Skill] to help your team achieve [Goal]."

                    MIDDLE PARAGRAPH(S) (The Pitch):
                    Connect your skills to their needs. Do not just repeat your resume. Tell a story about a problem you solved that is relevant to them.
                    "In my current role at [Previous Company], I identified an inefficiency in [Process]. By implementing [Solution], I reduced costs by [Number]% and saved [Time]. I am eager to apply this same strategic thinking to [Company Name]'s challenges with [Specific Challenge]."

                    CLOSING PARAGRAPH (The Call to Action):
                    Reiterate your passion and fit. Request an interview.
                    "I am confident that my background in [Field] and passion for [Company Value] make me a strong candidate. I look forward to the possibility of discussing how I can contribute to your team. Thank you for your time and consideration."

                    Sincerely,

                    [Your Name]
                `
            },
            { 
                id: "res_005",
                title: "Salary Negotiation", 
                desc: "Scripts to confidentially negotiate your offer without risking the opportunity.", 
                icon: "fa-solid fa-comments-dollar", 
                iconClass: "icon-interview", 
                category: "interview", 
                filename: "Salary_Negotiation_Scripts_EastLink.pdf",
                pdfContent: `
                    SALARY NEGOTIATION SCRIPTS & STRATEGIES

                    RULE #1: Always negotiate. (Most employers expect it).
                    RULE #2: Do your research (Glassdoor, Payscale) before the call.

                    SCENARIO A: When asked for salary expectations early in the process.
                    "I'm more focused on finding the right fit for my skills and long-term career goals. Could you share the budget range allocated for this position?"
                    OR
                    "Based on my market research and experience, I'm looking for a range between $X and $Y, depending on the full benefits package."

                    SCENARIO B: Receiving the initial offer (The Pause).
                    "Thank you so much for the offer. I'm very excited about the team. Would it be possible for me to review the full details in writing and get back to you within 24-48 hours?"

                    SCENARIO C: Asking for more (The Counter).
                    "I am incredibly excited about the prospect of joining the team. However, based on my experience with [Specific Skill] and industry standards, I was hoping for a salary closer to [Higher Number]. Is there flexibility in the base salary?"

                    SCENARIO D: If they say "No" to salary increase.
                    "I understand the budget constraints. Since the base salary is fixed, is there flexibility regarding other components, such as a signing bonus, additional vacation days, or a performance-based review after 6 months?"

                    CHECKLIST BEFORE SIGNING:
                    - Base Salary
                    - Bonuses (Signing/Performance)
                    - Equity/Stock Options
                    - Health/Dental/Vision
                    - 401k Match
                    - PTO/Vacation
                    - Remote Work Policy
                `
            },
            { 
                id: "res_006",
                title: "LinkedIn Optimizer", 
                desc: "Transform your profile into a recruiter magnet with SEO keywords and structure.", 
                icon: "fa-brands fa-linkedin", 
                iconClass: "icon-guide", 
                category: "guide", 
                filename: "LinkedIn_Optimizer_EastLink.pdf",
                pdfContent: `
                    LINKEDIN PROFILE OPTIMIZATION CHECKLIST

                    1. THE HEADLINE (Most Important for SEO)
                    Formula: [Job Title] | [Key Skill 1] | [Key Skill 2] | [Value Proposition]
                    Example: "Senior Project Manager | Agile & Scrum | SaaS Implementation | Driving Operational Efficiency"

                    2. THE ABOUT SECTION
                    - Paragraph 1: The Hook. Who are you and what drives you?
                    - Paragraph 2: Your expertise. What problems do you solve?
                    - Paragraph 3: Key Skills list (Great for search algorithms).
                    - Paragraph 4: Call to Action. (e.g., "Open to connecting!")

                    3. EXPERIENCE
                    - Don't just list duties. List ACHIEVEMENTS.
                    - Use bullet points.
                    - Start with action verbs (Led, Created, Generated).
                    - Attach media (PDFs, links, images) if available.

                    4. SKILLS SECTION
                    - Add at least 5 relevant skills.
                    - Pin the top 3 most relevant to the job you want.
                    - Ask colleagues for endorsements.

                    5. URL CUSTOMIZATION
                    - Change www.linkedin.com/in/john-doe-123456 to www.linkedin.com/in/johndoe.

                    6. ACTIVITY
                    - Comment on industry posts (adds visibility).
                    - Share relevant articles.
                    - Write your own posts 1-2 times a week.

                    7. RECOMMENDATIONS
                    - Aim for at least 3 recommendations from former managers or colleagues.
                    - Give recommendations to get them.
                `
            }
        ];

        // --- AUTH & LOGIC ---
        onAuthStateChanged(auth, async (user) => {
            if (!user) { window.location.href = 'signin.html'; return; }
            
            listenForBadges(user.uid);
            
            // Render content immediately (Unlocked)
            renderResources('all');

            try {
                const snap = await getDoc(doc(db, "users", user.uid));
                if (snap.exists()) {
                    const data = snap.data();
                    const avatarImg = document.getElementById('header-avatar-img');
                    const avatarFallback = document.getElementById('header-avatar-fallback');
                    if(data.photoURL || user.photoURL) {
                        avatarImg.src = data.photoURL || user.photoURL;
                        avatarImg.style.display = 'block';
                        avatarFallback.style.display = 'none';
                    } else {
                        avatarImg.style.display = 'none';
                        avatarFallback.style.display = 'grid';
                        avatarFallback.innerText = (data.fullName || "U").charAt(0).toUpperCase();
                    }
                }
            } catch(e) { 
                console.error("Profile load error", e);
            }
        });

        window.renderResources = (cat) => {
            const grid = document.getElementById('resources-grid');
            if (!grid) return; 
            grid.innerHTML = '';
            
            const list = cat === 'all' ? resourcesData : resourcesData.filter(r => r.category === cat);
            
            list.forEach((res, i) => {
                const delay = i * 0.1;
                grid.innerHTML += `
                    <div class="glass-panel resource-card animate__animated animate__fadeInUp" style="animation-delay:${delay}s">
                        <div class="icon-box ${res.iconClass}"><i class="${res.icon}"></i></div>
                        <h3 class="res-title">${res.title}</h3>
                        <p class="res-desc">${res.desc}</p>
                        <button class="btn-download" onclick="generateAndDownloadPDF('${res.id}', this)">
                            <i class="fas fa-download"></i> Download PDF
                        </button>
                    </div>
                `;
            });
        };

        // --- PDF GENERATION LOGIC ---
        window.generateAndDownloadPDF = async (resourceId, btn) => {
            if(btn.dataset.processing === "true") return;
            btn.dataset.processing = "true";
            const originalHTML = btn.innerHTML;
            btn.innerHTML = `<span class="loading-spinner"></span> Generating...`;

            try {
                const resource = resourcesData.find(r => r.id === resourceId);
                if(!resource) throw new Error("Resource not found");

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                const pageWidth = doc.internal.pageSize.getWidth();
                const margin = 20;

                // 1. ADD LOGO (Top Left)
                // We use a base64 placeholder or load image. For reliability in this script, 
                // we will try to load the image from the path provided.
                const logoUrl = './assets/images/logo.png';
                
                const addLogo = () => {
                    return new Promise((resolve) => {
                        const img = new Image();
                        img.src = logoUrl;
                        img.onload = () => {
                            // Aspect ratio logic (assuming standard logo size)
                            const width = 30; 
                            const height = (img.height / img.width) * width;
                            doc.addImage(img, 'PNG', margin, 15, width, height);
                            resolve();
                        };
                        img.onerror = () => {
                            // Fallback if logo missing
                            doc.setFontSize(14);
                            doc.setTextColor(217, 119, 6); // Gold color
                            doc.text("EASTLINK RECRUITERS", margin, 25);
                            resolve();
                        };
                    });
                };

                await addLogo();

                // 2. HEADER
                doc.setFont("helvetica", "bold");
                doc.setFontSize(22);
                doc.setTextColor(15, 23, 42); // Dark Blue
                doc.text(resource.title.toUpperCase(), margin, 50);

                doc.setDrawColor(217, 119, 6); // Gold Line
                doc.setLineWidth(1);
                doc.line(margin, 55, pageWidth - margin, 55);

                // 3. CONTENT
                doc.setFont("helvetica", "normal");
                doc.setFontSize(11);
                doc.setTextColor(51, 65, 85); // Slate gray

                const splitText = doc.splitTextToSize(resource.pdfContent.trim(), pageWidth - (margin * 2));
                doc.text(splitText, margin, 70);

                // 4. FOOTER
                const pageCount = doc.internal.getNumberOfPages();
                for(let i = 1; i <= pageCount; i++) {
                    doc.setPage(i);
                    doc.setFontSize(9);
                    doc.setTextColor(150);
                    doc.text(`Â© 2026 EastLink Recruiters - Premium Resource`, margin, doc.internal.pageSize.getHeight() - 10);
                    doc.text(`Page ${i}`, pageWidth - margin - 10, doc.internal.pageSize.getHeight() - 10);
                }

                // 5. DOWNLOAD
                doc.save(resource.filename);

                // Success State
                btn.innerHTML = `<i class="fas fa-check"></i> Downloaded`;
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.dataset.processing = "false";
                }, 2000);

            } catch (error) {
                console.error(error);
                btn.innerHTML = `<i class="fas fa-exclamation-circle"></i> Error`;
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.dataset.processing = "false";
                }, 2000);
            }
        };

        window.filterResources = (cat, el) => {
            document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            renderResources(cat);
        };

        function listenForBadges(uid) {
            const up = (id, c) => { const el = document.getElementById(id); if(el) { el.innerText=c>9?'9+':c; el.style.display=c?'flex':'none'; }};
            onSnapshot(query(collection(db, "notifications"), where("userId", "==", uid), where("read", "==", false)), s => up('notif-badge', s.size));
            onSnapshot(query(collection(db, "messages"), where("receiverId", "==", uid), where("read", "==", false)), s => up('msg-badge', s.size));
        }

        // --- SEARCH LOGIC ---
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        if(searchInput) {
            searchInput.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase().trim();
                if(term.length < 2) { searchResults.style.display = 'none'; return; }
                const matches = resourcesData.filter(r => r.title.toLowerCase().includes(term));
                if(matches.length > 0) {
                    searchResults.innerHTML = matches.map(r => `<div class="search-result-item" onclick="generateAndDownloadPDF('${r.id}', {innerHTML:'', dataset:{}})">${r.title}</div>`).join('');
                    searchResults.style.display = 'block';
                } else {
                    searchResults.innerHTML = `<div style="padding:10px; color:var(--text-muted); font-size:0.9rem;">No resources found</div>`;
                    searchResults.style.display = 'block';
                }
            });
            document.addEventListener('click', (e) => {
                if (!document.querySelector('.global-search-container').contains(e.target)) searchResults.style.display = 'none';
            });
        }

        // --- PWA LOGIC ---
        let deferredPrompt;
        const pwaPopup = document.getElementById('pwa-install-popup');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            if(!localStorage.getItem('pwaDismissed')) {
                pwaPopup.style.display = 'flex';
            }
        });

        window.installPWA = async () => {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if (outcome === 'accepted') {
                pwaPopup.style.display = 'none';
            }
            deferredPrompt = null;
        };

        window.dismissPWA = () => {
            pwaPopup.style.display = 'none';
            localStorage.setItem('pwaDismissed', 'true');
        };

        if ("serviceWorker" in navigator) navigator.serviceWorker.register("./service-worker.js");
    </script>
</body>
</html>
